(window.webpackJsonp=window.webpackJsonp||[]).push([[206],{gLCo:function(e,t,a){"use strict";a.r(t);a("8Qi2"),a("IdsT"),a("l9AF"),a("pBsb"),a("w9C0");var n=a("XW+2"),i=(a("3fBH"),a("g2mn")),o=(a("fx2i"),a("cZi0")),l=(a("9TUk"),a("46ec")),d=(a("kkQI"),a("6T3l")),r=a("UpC8"),s=a("Id3l"),c=a("RNsw"),p=a("OR/T"),f=a("bn5B"),m=a("PnTt"),h=a("r0ML"),u=a.n(h),g=a("U8v4"),b=a("6K4T"),w=a.n(b),I=a("vcLm"),y=a("2Jyx"),k=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(p.a)(this,Object(f.a)(t).call(this,e))).handleCancelSend=function(){a.setState({visibleSend:!1,loadingSend:!1})},a.state={designFlowId:e.match.params.designFlowId||"",partManageId:"",fujianLook:[],rowDataList:[],visibleSend:!1,loadingSend:!1},a}return Object(m.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.designFlowId,s=t.visibleSend,c=t.loadingSend;return u.a.createElement("div",{className:w.a.root},u.a.createElement(I.a,Object(r.a)({},this.props,{fetchConfig:{apiName:"getZjTzPartManageList",otherParams:{designFlowId:a}},upload:this.props.myUpload,fetch:this.props.myFetch,wrappedComponentRef:function(t){e.tableGM=t},headers:{token:this.props.loginAndLogoutInfo.loginInfo.token},formConfig:[{label:"\u4e3b\u952eid",field:"codePid",hide:!0},{label:"\u5916\u5c42\u4e3b\u952eid",field:"designFlowId",hide:!0},{type:"qnnTable",field:"zjTzPartManageList",incToForm:!0,qnnTableConfig:{actionBtnsPosition:"top",antd:{rowKey:"partManageId",size:"small",scroll:{y:.65*document.documentElement.clientHeight}},drawerConfig:{width:"1000px"},limit:999,curPage:1,paginationConfig:!1,firstRowIsSearch:!1,isShowRowSelect:!0,formItemLayout:{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},componentsKey:{HasTicketMoneyForm:function(t){return u.a.createElement(y.a,Object(r.a)({refreshOut:e.tableGM.refresh},t,e.props,{designFlowId:a}))}},formConfig:[{isInTable:!1,form:{field:"partManageId",type:"string",hide:!0}},{isInTable:!1,form:{field:"designFlowId",type:"string",initialValue:a,hide:!0}},{table:{title:"\u5e8f\u53f7",dataIndex:"orderNum",key:"orderNum",width:60,align:"center",defaultSortOrder:"descend",fixed:"left",render:function(e,t){return"white"===t.colorFlag?e:u.a.createElement(d.a,{style:{width:"100%",textAlign:"center"},color:t.colorFlag,key:e},e)}},isInForm:!1,form:{type:"string",placeholder:"\u8bf7\u8f93\u5165",required:!0}},{table:{title:"\u8bbe\u8ba1\u73af\u8282\u540d\u79f0",onClick:"detail",dataIndex:"designPartName",key:"designPartName",tdEdit:!1},form:{type:"string",placeholder:"\u8bf7\u8f93\u5165",required:!0}},{table:{title:"\u4e2d\u6807\u65f6\u73af\u8282",dataIndex:"bidPartName",align:"center",width:120,key:"bidPartName",tdEdit:!1,render:function(e,t){return"0"===t.bidPartId?u.a.createElement(l.a,{disabled:!0,checked:!1}):u.a.createElement(l.a,{disabled:!0,checked:!0})}},isInForm:!1},{table:{title:"\u91cd\u70b9\u73af\u8282",dataIndex:"buName",key:"buName",width:120,align:"center",tdEdit:!1,render:function(e,t){return"0"===t.buId?u.a.createElement(l.a,{disabled:!0,checked:!1}):u.a.createElement(l.a,{disabled:!0,checked:!0})}},isInForm:!1},{table:{title:"\u8ba1\u5212\u5b8c\u6210\u65e5\u671f",dataIndex:"planDate",key:"planDate",tdEdit:!1,width:140,format:"YYYY-MM-DD"},form:{type:"date",addDisabled:!0,editDisabled:!0,field:"planDate",placeholder:"\u8bf7\u9009\u62e9"}},{table:{title:"\u5b9e\u9645\u5b8c\u6210\u65e5\u671f",format:"YYYY-MM-DD",dataIndex:"actualDate",width:140,key:"actualDate",tdEdit:!1},form:{type:"date",field:"actualDate",placeholder:"\u8bf7\u9009\u62e9"}},{table:{title:"\u9501\u5b9a\u72b6\u6001",dataIndex:"lockFlag",width:100,key:"lockFlag",render:function(e){return"0"===e?"\u672a\u9501\u5b9a":"\u9501\u5b9a"}},isInForm:!1},{table:{title:"\u8bc1\u660e\u6750\u6599\u9644\u4ef6",dataIndex:"fileFlag",width:140,key:"fileFlag",render:function(e,t){return e?"0"===e?"\u672a\u4e0a\u4f20":"\u5df2\u4e0a\u4f20":""},onClick:function(t){e.setState({partManageId:t.rowData.partManageId,fujianLook:t.rowData.zjTzFileList,rowDataList:t.rowData},function(){t.rowData.zjTzFileList.length>0?e.setState({visibleSend:!0}):o.b.warn("\u5f53\u524d\u6570\u636e\u6ca1\u6709\u4e0a\u4f20\u9644\u4ef6\uff01")})}},form:{field:"zjTzFileList",type:"files",fetchConfig:{apiName:window.configs.domain+"upload"},showDownloadIcon:!0,onPreview:"bind:_docFilesByOfficeUrl",onChange:function(t,a){t&&t[0]&&t[0].name&&("rar"===t[0].name.split(".")[1]||"zip"===t[0].name.split(".")[1]||"7z"===t[0].name.split(".")[1])&&(o.b.warn("\u4e0d\u5141\u8bb8\u4e0a\u4f20rar\u3001zip\u30017z\u683c\u5f0f\u7684\u6587\u4ef6\uff01"),setTimeout(function(){e.table.qnnForm.form.setFieldsValue({zjTzFileList:[]})},200))}}}],actionBtns:[{name:"goback",type:"dashed",label:"\u8fd4\u56de",isValidate:!1,onClick:function(t){var a=e.props.myPublic.appInfo.mainModule;e.props.dispatch(Object(g.push)("".concat(a,"DesignProcessManagement")))}}]}}],btns:[]})),u.a.createElement(n.a,{width:"800px",style:{top:"0"},title:"\u8bc1\u660e\u6750\u6599",visible:s,footer:null,onCancel:this.handleCancelSend,bodyStyle:{width:"800px"},centered:!0,destroyOnClose:this.handleCancelSend,wrapClassName:"modals"},u.a.createElement(i.a,{spinning:c},u.a.createElement(I.a,Object(r.a)({},this.props,{match:this.props.match,fetch:this.props.myFetch,upload:this.props.myUpload,headers:{token:this.props.loginAndLogoutInfo.loginInfo.token},formConfig:[{type:"qnnTable",field:"qnnTableKP",qnnTableConfig:{data:this.state.fujianLook,drawerConfig:{width:"800px"},actionBtnsPosition:"top",antd:{rowKey:function(e){return e.partManageId},size:"small"},paginationConfig:{position:"bottom"},firstRowIsSearch:!1,isShowRowSelect:!1,wrappedComponentRef:function(t){e.tableFJ=t},actionBtns:[],formConfig:[{isInTable:!1,form:{type:"string",field:"partManageId",initialValue:this.state.partManageId,hide:!0}},{table:{title:"\u8bc1\u660e\u6750\u6599\u6587\u4ef6\u540d",dataIndex:"name",key:"name"},isInForm:!1},{table:{title:"\u9644\u4ef6",dataIndex:"url",key:"url",render:function(e){return u.a.createElement("div",{onClick:function(){}},u.a.createElement("a",{target:"_blank",href:e},"\u67e5\u770b\u9644\u4ef6"))}},isInForm:!1}]}}],btns:[],formItemLayout:{labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:20},sm:{span:20}}}})))))}}]),t}(h.Component);t.default=k}}]);