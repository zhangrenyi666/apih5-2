(window.webpackJsonp=window.webpackJsonp||[]).push([[187],{NdIY:function(e,t,a){"use strict";a.r(t);a("9U97"),a("x/6R"),a("zIPO"),a("MRnW"),a("IdsT"),a("l9AF"),a("orcL"),a("3fBH");var n=a("g2mn"),o=a("UpC8"),l=(a("fx2i"),a("cZi0")),s=a("Id3l"),r=a("RNsw"),i=a("OR/T"),c=a("bn5B"),d=a("PnTt"),p=(a("w9C0"),a("XW+2")),u=a("r0ML"),h=a.n(u),f=a("6eYn"),b=a("vcLm"),m=(a("ID3L"),a("U8v4")),w=a("useG"),g=a.n(w),I=p.a.confirm,y={fetchConfig:{apiName:"getZjTzNoteInstructSugList"},antd:{rowKey:function(e){return e.noteInstructSugId},size:"small"},drawerConfig:{width:"1000px"},paginationConfig:{position:"bottom"},firstRowIsSearch:!1,isShowRowSelect:!0,formItemLayout:{labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}}}},S=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(i.a)(this,Object(c.a)(t).call(this,e))).handleCancelDirectional=function(){a.setState({visibleDirectional:!1,loadingDirectional:!1})},a.state={visibleDirectional:!1,noteInstructSugId:"",companyId:e.loginAndLogoutInfo.loginInfo.userInfo.companyList[0].companyId,companyName:e.loginAndLogoutInfo.loginInfo.userInfo.companyList[0].companyName,loadingDirectional:!1},a}return Object(d.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.visibleDirectional,s=t.loadingDirectional,r=t.noteInstructSugId,i=t.companyId,c=this.props.loginAndLogoutInfo.loginInfo.userInfo,d=c.realName,u=c.ext1;return h.a.createElement("div",{className:g.a.root},h.a.createElement(f.a,Object(o.a)({},this.props,{fetch:this.props.myFetch,upload:this.props.myUpload,headers:{token:this.props.loginAndLogoutInfo.loginInfo.token},wrappedComponentRef:function(t){e.table=t}},y,{desc:"1"===u?"\u53d1\u5e03\uff1a\u4f7f\u6570\u636e\u5168\u5e73\u53f0\u7528\u6237\u53ef\u89c1\uff1b\u5e7f\u800c\u544a\u4e4b\uff1a\u5c06\u5df2\u53d1\u5e03\u7684\u6570\u636e\u5c55\u793a\u81f3\u9996\u9875":null,formConfig:[{isInTable:!1,form:{field:"noteInstructSugId",type:"string",hide:!0}},{isInTable:!1,form:{field:"companyId",type:"string",hide:!0,initialValue:i}},{table:{title:"\u6807\u9898",tooltip:80,onClick:"detail",dataIndex:"title",key:"title"},form:{type:"string",field:"title",placeholder:"\u8bf7\u8f93\u5165",required:!0,formItemLayoutForm:{labelCol:{xs:{span:6},sm:{span:3}},wrapperCol:{xs:{span:18},sm:{span:21}}}}},{table:{title:"\u53d1\u5e03\u4eba",width:130,dataIndex:"publisher",key:"publisher"},form:{field:"publisher",type:"string",label:"\u767b\u8bb0\u4eba",required:!0,addDisabled:!0,editDisabled:!0,placeholder:"\u8bf7\u8f93\u5165",formItemLayoutForm:{labelCol:{xs:{span:6},sm:{span:3}},wrapperCol:{xs:{span:18},sm:{span:21}}},initialValue:d}},{table:{title:"\u53d1\u5e03\u65e5\u671f",width:130,dataIndex:"releaseDate",key:"releaseDate",format:"YYYY-MM-DD"},form:{field:"releaseDate",type:"date",initialValue:new Date,placeholder:"\u8bf7\u9009\u62e9",addDisabled:!0,editDisabled:!0,formItemLayoutForm:{labelCol:{xs:{span:6},sm:{span:3}},wrapperCol:{xs:{span:18},sm:{span:21}}}}},{isInTable:!1,form:{type:"textarea",label:"\u4e3b\u8981\u5185\u5bb9",field:"registerPerson",placeholder:"\u8bf7\u8f93\u5165..."}},{table:{title:"\u72b6\u6001",width:100,dataIndex:"releaseName",key:"releaseName"},isInForm:!1,form:{type:"select",field:"releaseId",hide:!0,optionData:[{label:"\u672a\u53d1\u5e03",value:"0"},{label:"\u53d1\u5e03",value:"1"}]}},{table:{title:"\u662f\u5426\u5728\u9996\u9875\u5e7f\u800c\u544a\u4e4b",dataIndex:"homeShow",filter:!0,width:160,key:"homeShow",render:function(e){return"0"===e?"\u5426":"\u662f"}},isInForm:!1,form:{type:"select",field:"homeShow",hide:!0,optionData:[{label:"\u5426",value:"0"},{label:"\u662f",value:"1"}]}},{isInTable:!1,form:{label:"\u9644\u4ef6",field:"zjTzFileList",type:"files",fetchConfig:{apiName:window.configs.domain+"upload",otherParams:{name:"\u516c\u544a-\u6307\u4ee4\u3001\u5efa\u8bae"}},showDownloadIcon:!0,onPreview:"bind:_docFilesByOfficeUrl"}},{isInForm:!1,table:{title:"\u64cd\u4f5c",fixed:"right",dataIndex:"action",key:"action",align:"center",noHaveSearchInput:!0,showType:"tile",width:80,btns:[{name:"AdviceInstructionsDetail",render:function(e){return"<a>\u63a8\u9001\u8bb0\u5f55</a>"},onClick:function(e){var t=e.props.myPublic.appInfo.mainModule,a=e.rowData.noteInstructSugId;e.props.dispatch(Object(m.push)("".concat(t,"AdviceInstructionsDetail/").concat(a)))}}]}}],method:{editClick:function(t){"1"===t.selectedRows[0].releaseId?(t.btnCallbackFn.closeDrawer(),l.b.warn("\u5df2\u53d1\u5e03\u7684\u4e0d\u80fd\u4fee\u6539!"),e.table.clearSelectedRows()):e.table.clearSelectedRows()},faBuClick:function(t){e.table.clearSelectedRows();var a=t.props.myFetch;if(t.selectedRows.length>0){for(var n=[],o=0;o<t.selectedRows.length;o++)"1"===t.selectedRows[o].releaseId&&n.push(t.selectedRows[o].releaseId);n.length>0?l.b.warn("\u5df2\u53d1\u5e03\u7684\u6d88\u606f\u4e0d\u80fd\u53d1\u5e03\uff01"):I({title:"\u786e\u5b9a\u53d1\u5e03\u4e48?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){a("batchReleaseZjTzNoteInstructSug",t.selectedRows).then(function(t){var a=t.success,n=t.message;a?(l.b.success(n),e.table.refresh()):l.b.error(n)})}})}else l.b.warn("\u8bf7\u9009\u62e9\u6570\u636e")},cheHuiClick:function(t){e.table.clearSelectedRows();var a=t.props.myFetch;if(t.selectedRows.length>0){for(var n=[],o=0;o<t.selectedRows.length;o++)"0"===t.selectedRows[o].releaseId&&n.push(t.selectedRows[o].releaseId);n.length>0?l.b.warn("\u672a\u53d1\u5e03\u7684\u6d88\u606f\u4e0d\u80fd\u64a4\u56de\uff01"):I({title:"\u786e\u5b9a\u64a4\u56de\u4e48?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){a("batchRecallZjTzNoteInstructSug",t.selectedRows).then(function(t){var a=t.success,n=t.message;a?(l.b.success(n),e.table.refresh()):l.b.error(n)})}})}else l.b.warn("\u8bf7\u9009\u62e9\u6570\u636e")},dingXiangTuiSong:function(t){e.table.clearSelectedRows(),t.selectedRows.length>0?1===t.selectedRows.length?"1"===t.selectedRows[0].releaseId?e.setState({visibleDirectional:!0,noteInstructSugId:t.selectedRows[0].noteInstructSugId}):l.b.warn("\u672a\u53d1\u5e03\u7684\u6d88\u606f\u4e0d\u80fd\u5b9a\u5411\u63a8\u9001\uff01"):l.b.warn("\u8bf7\u9009\u62e9\u4e00\u6761\u6570\u636e"):l.b.warn("\u8bf7\u9009\u62e9\u6570\u636e")},guangErGaoZhi:function(t){e.table.clearSelectedRows(),t.selectedRows.length>0?1===t.selectedRows.length?"1"===t.selectedRows[0].releaseId?I({title:"\u786e\u5b9a\u5e7f\u800c\u544a\u4e4b\u5230\u9996\u9875\u4e48\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){e.props.myFetch("toHomeShowZjTzNoteInstructSug",t.selectedRows[0]).then(function(t){var a=t.success,n=t.message;t.data;a?(l.b.success(n),e.table.refresh()):l.b.error(n)})}}):l.b.warn("\u672a\u53d1\u5e03\u7684\u6d88\u606f\u4e0d\u80fd\u5e7f\u800c\u544a\u4e4b\uff01"):l.b.warn("\u8bf7\u9009\u62e9\u4e00\u6761\u6570\u636e"):l.b.warn("\u8bf7\u9009\u62e9\u6570\u636e")},filestExport:function(t){e.table.clearSelectedRows();var a=t.props.myFetch;t.selectedRows.length>0?I({title:"\u786e\u5b9a\u5bfc\u51fa\u9644\u4ef6\u4e48?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){a("batchExportZjTzNoteInstructSugFile",t.selectedRows).then(function(t){var a=t.success,n=t.message,o=t.data;a?(l.b.success(n),window.location.href=o,e.table.refresh(),e.table.clearSelectedRows()):l.b.error(n)})}}):l.b.warn("\u8bf7\u9009\u62e9\u6570\u636e")},delClick:function(t){var a=t.props.myFetch,n=[];if(t.selectedRows.length>0){for(var o=0;o<t.selectedRows.length;o++)"1"===t.selectedRows[o].releaseId&&n.push(t.selectedRows[o].releaseId);n.length>0?(t.btnCallbackFn.closeDrawer(),l.b.warn("\u5df2\u53d1\u5e03\u7684\u4e0d\u80fd\u5220\u9664!"),e.table.clearSelectedRows()):I({title:"\u786e\u5b9a\u5220\u9664\u4e48?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){a("batchDeleteUpdateZjTzNoteInstructSug",t.selectedRows).then(function(t){var a=t.success,n=t.message;a?(l.b.success(n),e.table.refresh(),e.table.clearSelectedRows()):l.b.error(n)})}})}else l.b.warn("\u8bf7\u9009\u62e9\u6570\u636e!")}},actionBtns:{apiName:"getSysMenuBtn",otherParams:function(e){var t=e.Pprops;return{menuParentId:t.routerInfo.routeData[t.routerInfo.curKey]._value,tableField:"projectInfo"}}}})),h.a.createElement(p.a,{width:"500px",style:{top:"0"},title:"\u5b9a\u5411\u63a8\u9001",visible:a,footer:null,onCancel:this.handleCancelDirectional,bodyStyle:{width:"500px"},centered:!0,destroyOnClose:this.handleCancelDirectional,wrapClassName:"modals"},h.a.createElement(n.a,{spinning:s},h.a.createElement(b.a,Object(o.a)({},this.props,{match:this.props.match,fetch:this.props.myFetch,upload:this.props.myUpload,headers:{token:this.props.loginAndLogoutInfo.loginInfo.token},formConfig:[{type:"string",field:"noteInstructSugId",initialValue:r,hide:!0},{type:"string",field:"noteInstructSugRecordId",hide:!0},{field:"contentDesc",type:"textarea",label:"\u5185\u5bb9\u63cf\u8ff0",required:!0,placeholder:"\u8bf7\u8f93\u5165"},{label:"\u53d1\u9001\u7ed9",field:"personList",type:"treeSelect",required:!0,treeSelectOption:{help:!0,selectType:"2",fetchConfig:{apiName:"getSysDepartmentUserAllTree"},useCollect:!0,collectApi:"appGetSysFrequentContactsList",collectApiByAdd:"appAddSysFrequentContacts",collectApiByDel:"appRemoveSysFrequentContacts",search:!0,searchPlaceholder:"\u59d3\u540d\u3001\u8d26\u53f7\u3001\u7535\u8bdd",searchParamsKey:"search",searchOtherParams:{pageSize:999}}}],btns:[{name:"cancel",type:"dashed",label:"\u53d6\u6d88",isValidate:!1,onClick:function(){e.setState({visibleDirectional:!1,loadingDirectional:!1})}},{name:"submit",type:"primary",label:"\u4fdd\u5b58",onClick:function(t){e.setState({loadingDirectional:!0}),e.props.myFetch("addZjTzNoteInstructSugRecord",t.values).then(function(t){var a=t.success,n=t.message;a?(l.b.success(n),e.table.refresh(),e.setState({visibleDirectional:!1,loadingDirectional:!1})):l.b.error(n)})}}],formItemLayout:{labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:20},sm:{span:20}}}})))))}}]),t}(u.Component);t.default=S}}]);