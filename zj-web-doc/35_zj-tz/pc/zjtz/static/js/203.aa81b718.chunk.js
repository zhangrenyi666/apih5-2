(window.webpackJsonp=window.webpackJsonp||[]).push([[203],{yFha:function(e,a,t){"use strict";t.r(a);t("zIPO"),t("8Qi2"),t("IdsT"),t("l9AF"),t("S26F"),t("pBsb");var s=t("UpC8"),n=(t("fx2i"),t("cZi0")),l=t("Id3l"),o=t("RNsw"),r=t("OR/T"),i=t("bn5B"),d=t("PnTt"),p=(t("w9C0"),t("XW+2")),c=t("r0ML"),m=t.n(c),f=t("6eYn"),b=t("XrYm"),u=t.n(b),h=t("U8v4"),g=p.a.confirm,I={antd:{rowKey:function(e){return e.designChangeRecordId},size:"small"},drawerConfig:{width:"1100px"},paginationConfig:{position:"bottom"},firstRowIsSearch:!1,isShowRowSelect:!0},C=function(e){function a(e){var t;return Object(l.a)(this,a),(t=Object(r.a)(this,Object(i.a)(a).call(this,e))).handleCancelSend=function(){t.setState({visibleSend:!1,loadingSend:!1})},t.state={realName:e.loginAndLogoutInfo.loginInfo.userInfo.realName,designChangeId:e.match.params.designChangeId||"",proNameVal:e.match.params.projectName||"",proNameId:e.match.params.projectId||"",subprojectInfoId:e.match.params.subprojectInfoId||""},t}return Object(d.a)(a,e),Object(o.a)(a,[{key:"render",value:function(){var e=this,a=this.state,t=a.designChangeId,l=a.subprojectInfoId,o=a.realName,r=a.proNameId,i=a.proNameVal;return m.a.createElement("div",{className:u.a.root},m.a.createElement(f.a,Object(s.a)({},this.props,{fetch:this.props.myFetch,upload:this.props.myUpload,headers:{token:this.props.loginAndLogoutInfo.loginInfo.token},fetchConfig:{apiName:"getZjTzDesignChangeRecordList",otherParams:{designChangeId:t}},wrappedComponentRef:function(a){e.tableBGGL=a},method:{goBack:function(e){var a=e.props.myPublic.appInfo.mainModule;e.props.dispatch(Object(h.push)("".concat(a,"DesignChangeManage")))},editClick:function(a){"1"===a.selectedRows[0].statusId?(a.btnCallbackFn.closeDrawer(),n.b.warn("\u8bf7\u9009\u62e9\u672a\u4e0a\u62a5/\u88ab\u9000\u56de\u7684\u6570\u636e!"),e.tableBGGL.clearSelectedRows()):e.tableBGGL.clearSelectedRows()},delClick:function(a){var t=a.props,s=t.myFetch,l=t.myPublic.appInfo.mainModule,o=[];if(a.selectedRows.length>0){for(var r=0;r<a.selectedRows.length;r++)"1"===a.selectedRows[r].statusId&&o.push(a.selectedRows[r].statusId);o.length>0?(a.btnCallbackFn.closeDrawer(),n.b.warn("\u8bf7\u9009\u62e9\u672a\u4e0a\u62a5/\u88ab\u9000\u56de\u7684\u6570\u636e!"),e.tableBGGL.clearSelectedRows()):g({title:"\u786e\u5b9a\u5220\u9664\u4e48?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){s("batchDeleteUpdateZjTzDesignChangeRecord",a.selectedRows).then(function(t){var s=t.success,o=t.message;s?(n.b.success(o),a.state.data.length===a.selectedRows.length?a.props.dispatch(Object(h.push)("".concat(l,"DesignChangeManage"))):(e.tableBGGL.refresh(),e.tableBGGL.clearSelectedRows())):n.b.error(o)})}})}else n.b.warn("\u8bf7\u9009\u62e9\u6570\u636e!")},shangBaoClick:function(a){e.tableBGGL.clearSelectedRows();var t=a.props.myFetch;if(a.selectedRows.length>0){for(var s=[],l=0;l<a.selectedRows.length;l++)"1"===a.selectedRows[l].statusId&&s.push(a.selectedRows[l].statusId);s.length>0?n.b.warn("\u5df2\u4e0a\u62a5\u7684\u6d88\u606f\u4e0d\u80fd\u4e0a\u62a5\uff01"):g({title:"\u786e\u5b9a\u4e0a\u62a5\u4e48?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){t("batchReleaseZjTzDesignChangeRecord",a.selectedRows).then(function(a){a.data;var t=a.success,s=a.message;t?(n.b.success(s),e.tableBGGL.refresh()):n.b.error(s)})}})}else n.b.warn("\u8bf7\u9009\u62e9\u6570\u636e\uff01")},tuiHuiClick:function(a){e.tableBGGL.clearSelectedRows();var t=a.props.myFetch;if(a.selectedRows.length>0){for(var s=[],l=0;l<a.selectedRows.length;l++)"0"!==a.selectedRows[l].statusId&&"2"!==a.selectedRows[l].statusId||s.push(a.selectedRows[l].statusId);s.length>0?n.b.warn("\u672a\u4e0a\u62a5/\u88ab\u9000\u56de\u7684\u6d88\u606f\u4e0d\u80fd\u9000\u56de\uff01"):g({title:"\u786e\u5b9a\u9000\u56de\u4e48?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){t("batchRecallZjTzDesignChangeRecord",a.selectedRows).then(function(a){var t=a.success,s=a.message;t?(n.b.success(s),e.tableBGGL.refresh()):n.b.error(s)})}})}else n.b.warn("\u8bf7\u9009\u62e9\u6570\u636e\uff01")}},actionBtns:{apiName:"getSysMenuBtn",otherParams:function(e){var a=e.Pprops;return{menuParentId:a.routerInfo.routeData[a.routerInfo.curKey]._value,tableField:"projectInfo"}}}},I,{formConfig:[{isInTable:!1,form:{field:"designChangeRecordId",type:"string",hide:!0}},{isInTable:!1,form:{field:"projectId",type:"string",hide:!0,initialValue:r}},{isInTable:!1,form:{field:"designChangeId",type:"string",hide:!0,initialValue:t}},{table:{title:"\u9879\u76ee\u540d\u79f0",dataIndex:"projectName",key:"projectName",onClick:"detail",filter:!0,fixed:"left"},form:{label:"\u9879\u76ee\u540d\u79f0",field:"projectName",required:!0,addDisabled:!0,disabled:!0,editDisabled:!0,type:"string",placeholder:"\u8bf7\u8f93\u5165",initialValue:function(){return i},formItemLayout:{labelCol:{xs:{span:21},sm:{span:3}},wrapperCol:{xs:{span:21},sm:{span:21}}}}},{table:{title:"\u5b50\u9879\u76ee\u540d\u79f0",filter:!0,dataIndex:"subprojectName",key:"subprojectName"},form:{type:"select",label:"\u5b50\u9879\u76ee\u540d\u79f0",field:"subprojectInfoId",placeholder:"\u8bf7\u8f93\u5165",initialValue:function(){return l},disabled:!0,addDisabled:!0,editDisabled:!0,optionConfig:{label:"subprojectName",value:"subprojectInfoId"},fetchConfig:{apiName:"getZjTzProSubprojectInfoList",otherParams:{projectId:r}},formItemLayout:{labelCol:{xs:{span:21},sm:{span:3}},wrapperCol:{xs:{span:21},sm:{span:21}}}}},{table:{title:"\u8bbe\u8ba1\u53d8\u66f4\u540d\u79f0",width:120,tooltip:23,dataIndex:"designChangeName",key:"designChangeName",filter:!0},isInForm:!1,form:{field:"designChangeName",type:"textarea",placeholder:"\u8bf7\u8f93\u5165"}},{table:{title:"\u8bbe\u8ba1\u53d8\u66f4\u7f16\u53f7",width:120,dataIndex:"designChangeNumber",key:"designChangeNumber"},isInForm:!1},{table:{title:"\u53d8\u66f4\u7b49\u7ea7",dataIndex:"changeLevelName",key:"changeLevelName",filter:!0},isInForm:!1,form:{label:"\u53d8\u66f4\u7b49\u7ea7",field:"changeLevelId",type:"select",placeholder:"\u8bf7\u9009\u62e9",required:!0,optionConfig:{label:"itemName",value:"itemId"},fetchConfig:{apiName:"getBaseCodeSelect",otherParams:{itemId:"bianGengDengJi"}}}},{table:{title:"<div>\u53d8\u66f4\u91d1\u989d<br>\uff08\u4e07\u5143\uff09</div>",width:100,dataIndex:"changeAmount",key:"changeAmount"},isInForm:!1},{table:{title:"\u53d8\u66f4\u65f6\u95f4",width:100,format:"YYYY-MM-DD",dataIndex:"changeDate",key:"changeDate"},isInForm:!1},{isInTable:!1,form:{label:"\u8bbe\u8ba1\u9636\u6bb5",field:"designStageId",type:"select",placeholder:"\u8bf7\u9009\u62e9",required:!0,editDisabled:!0,optionConfig:{label:"itemName",value:"itemId"},fetchConfig:{apiName:"getBaseCodeSelect",otherParams:{itemId:"sheJiJieDuan"}},formItemLayout:{labelCol:{xs:{span:21},sm:{span:3}},wrapperCol:{xs:{span:21},sm:{span:21}}}}},{isInTable:!1,form:{label:"\u53d8\u66f4\u7b49\u7ea7",field:"changeLevelId",type:"select",placeholder:"\u8bf7\u9009\u62e9",required:!0,optionConfig:{label:"itemName",value:"itemId"},fetchConfig:{apiName:"getBaseCodeSelect",otherParams:{itemId:"bianGengDengJi"}},spanForm:12,formItemLayout:{labelCol:{xs:{span:21},sm:{span:6}},wrapperCol:{xs:{span:21},sm:{span:18}}}}},{isInTable:!1,form:{label:"\u662f\u5426\u6709\u52a8\u6001\u8bbe\u8ba1\u673a\u5236",field:"dynamicId",required:!0,type:"select",optionData:[{label:"\u662f",value:"1"},{label:"\u5426",value:"0"}],spanForm:12,formItemLayout:{labelCol:{xs:{span:21},sm:{span:7}},wrapperCol:{xs:{span:21},sm:{span:17}}}}},{isInTable:!1,form:{label:"\u53d8\u66f4\u6027\u8d28",field:"changeNatureId",type:"select",placeholder:"\u8bf7\u8f93\u5165",required:!0,optionConfig:{label:"itemName",value:"itemId"},fetchConfig:{apiName:"getBaseCodeSelect",otherParams:{itemId:"bianGengXingZhi"}},formItemLayout:{labelCol:{xs:{span:21},sm:{span:3}},wrapperCol:{xs:{span:21},sm:{span:21}}}}},{isInTable:!1,form:{label:"\u8bbe\u8ba1\u53d8\u66f4\u540d\u79f0",field:"designChangeName",type:"textarea",placeholder:"\u8bf7\u8f93\u5165",required:!0,spanForm:12,formItemLayout:{labelCol:{xs:{span:21},sm:{span:6}},wrapperCol:{xs:{span:21},sm:{span:18}}}}},{isInTable:!1,form:{label:"\u8bbe\u8ba1\u53d8\u66f4\u7f16\u53f7",field:"designChangeNumber",type:"string",placeholder:"\u8bf7\u8f93\u5165",required:!0,spanForm:12,formItemLayout:{labelCol:{xs:{span:21},sm:{span:6}},wrapperCol:{xs:{span:21},sm:{span:18}}}}},{isInTable:!1,form:{label:"\u53d8\u66f4\u589e\u51cf\u91d1\u989d",field:"changeAmount",type:"number",formatter:function(e){return e?"".concat(e.replace?e.replace(/(\u4e07|\u5143)/gi,""):e,"\u4e07\u5143"):e},parser:function(e){return e?e.replace(/(\u4e07|\u5143)/gi,""):e},placeholder:"\u8bf7\u8f93\u5165",required:!0,spanForm:12,formItemLayout:{labelCol:{xs:{span:21},sm:{span:6}},wrapperCol:{xs:{span:21},sm:{span:18}}}}},{isInTable:!1,form:{label:"\u53d8\u66f4\u65f6\u95f4",field:"changeDate",type:"date",placeholder:"\u8bf7\u9009\u62e9",required:!0,spanForm:12,formItemLayout:{labelCol:{xs:{span:21},sm:{span:6}},wrapperCol:{xs:{span:21},sm:{span:18}}}}},{table:{title:"\u8bbe\u8ba1\u53d8\u66f4\u5185\u5bb9\u7b80\u8981\u63cf\u8ff0",dataIndex:"content",tooltip:23,key:"content"},form:{label:"\u8bbe\u8ba1\u5185\u5bb9\u7b80\u8981\u63cf\u8ff0",field:"content",type:"textarea",required:!0,formItemLayout:{labelCol:{xs:{span:21},sm:{span:3}},wrapperCol:{xs:{span:21},sm:{span:21}}}}},{table:{title:"\u6709\u65e0\u52a8\u6001\u8bbe\u8ba1\u673a\u5236",width:140,dataIndex:"dynamicName",key:"dynamicName"},isInForm:!1},{isInTable:!1,form:{type:"textarea",label:"\u5907\u6ce8",field:"remarks",placeholder:"\u8bf7\u8f93\u5165",required:!1,formItemLayout:{labelCol:{xs:{span:21},sm:{span:3}},wrapperCol:{xs:{span:21},sm:{span:21}}}}},{isInTable:!1,form:{field:"createTime",type:"date",label:"\u521b\u5efa\u65e5\u671f",addDisabled:!0,editDisabled:!0,placeholder:"\u8bf7\u8f93\u5165",spanForm:12,formItemLayout:{labelCol:{xs:{span:21},sm:{span:6}},wrapperCol:{xs:{span:21},sm:{span:18}}},initialValue:function(){return new Date}}},{isInTable:!1,form:{field:"createUserName",type:"string",label:"\u521b\u5efa\u7528\u6237",addDisabled:!0,editDisabled:!0,placeholder:"\u8bf7\u8f93\u5165",spanForm:12,formItemLayout:{labelCol:{xs:{span:21},sm:{span:6}},wrapperCol:{xs:{span:21},sm:{span:18}}},initialValue:o}},{table:{title:"\u72b6\u6001",filter:!0,width:120,fixed:"right",dataIndex:"statusId",key:"statusId",type:"select"},isInForm:!1,form:{type:"select",field:"statusId",optionData:[{label:"\u672a\u4e0a\u62a5",value:"0"},{label:"\u5df2\u4e0a\u62a5",value:"1"},{label:"\u88ab\u9000\u56de",value:"2"}]}},{isInTable:!1,form:{label:"\u9644\u4ef6",field:"zjTzFileList",type:"files",fetchConfig:{apiName:window.configs.domain+"upload",otherParams:{name:"\u8bbe\u8ba1\u53d8\u66f4\u7ba1\u7406"}},formItemLayout:{labelCol:{xs:{span:21},sm:{span:3}},wrapperCol:{xs:{span:21},sm:{span:21}}},showDownloadIcon:!0,onPreview:"bind:_docFilesByOfficeUrl",onChange:function(a,t){a&&a[0]&&a[0].name&&("rar"===a[0].name.split(".")[1]||"zip"===a[0].name.split(".")[1]||"7z"===a[0].name.split(".")[1])&&(n.b.warn("\u4e0d\u5141\u8bb8\u4e0a\u4f20rar\u3001zip\u30017z\u683c\u5f0f\u7684\u6587\u4ef6\uff01"),setTimeout(function(){e.tableBGGL.qnnForm.form.setFieldsValue({zjTzFileList:[]})},200))}}}]})))}}]),a}(c.Component);a.default=C}}]);