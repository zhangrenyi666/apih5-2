(window.webpackJsonp=window.webpackJsonp||[]).push([[163],{SgCE:function(e,t,a){"use strict";a.r(t);var l=a("UpC8"),s=(a("fx2i"),a("cZi0")),o=a("Id3l"),n=a("RNsw"),r=a("OR/T"),i=a("bn5B"),c=a("PnTt"),d=(a("w9C0"),a("XW+2")),p=a("r0ML"),f=a.n(p),u=a("6eYn"),b=a("yu8Y"),w=a.n(b),h=d.a.confirm,m={antd:{rowKey:function(e){return e.riskAnalysisId},size:"small"},drawerConfig:{width:"1000px"},paginationConfig:{position:"bottom"},firstRowIsSearch:!1,isShowRowSelect:!0,formItemLayout:{labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}}}},I=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(r.a)(this,Object(i.a)(t).call(this,e))).state={},a}return Object(c.a)(t,e),Object(n.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.props.loginAndLogoutInfo.loginInfo.userInfo.curCompany,a=t.projectId,o=t.projectName;return f.a.createElement("div",{className:w.a.root},f.a.createElement(u.a,Object(l.a)({},this.props,{fetch:this.props.myFetch,upload:this.props.myUpload,headers:{token:this.props.loginAndLogoutInfo.loginInfo.token},wrappedComponentRef:function(t){e.table=t},fetchConfig:{apiName:"getZjTzRiskAnalysisList",otherParams:{projectId:a}}},m,{formConfig:[{isInTable:!1,form:{field:"riskAnalysisId",type:"string",hide:!0}},{isInTable:!1,form:{field:"projectName",type:"string",hide:!0,initialValue:o}},{table:{title:"\u5e74\u5ea6",dataIndex:"riskYear",key:"riskYear",format:"YYYY",align:"center"},form:{type:"year",field:"riskYear",required:!0}},{table:{title:"\u9879\u76ee\u540d\u79f0",dataIndex:"projectName",key:"projectName",width:260,tooltip:23,onClick:"detail"},form:{label:"\u9879\u76ee\u540d\u79f0",field:"projectId",type:"select",showSearch:!0,required:!0,addDisabled:!0,editDisabled:!0,initialValue:function(){return a},optionConfig:{label:"projectName",value:"projectId"},fetchConfig:{apiName:"getZjTzProManageList"},placeholder:"\u8bf7\u9009\u62e9"}},{table:{title:"\u6587\u4ef6\u540d\u79f0",dataIndex:"fileName",key:"fileName",width:200,tooltip:18},form:{type:"string",field:"fileName",placeholder:"\u8bf7\u8f93\u5165",required:!0,formItemLayout:{labelCol:{xs:{span:21},sm:{span:3}},wrapperCol:{xs:{span:21},sm:{span:21}}}}},{table:{title:"\u4e3b\u8981\u5185\u5bb9",dataIndex:"mainContent",width:200,tooltip:23,key:"mainContent"},form:{label:"\u4e3b\u8981\u5185\u5bb9",type:"textarea",field:"mainContent",placeholder:"\u8bf7\u8f93\u5165",required:!0,formItemLayout:{labelCol:{xs:{span:21},sm:{span:3}},wrapperCol:{xs:{span:21},sm:{span:21}}}}},{table:{title:"\u72b6\u6001",dataIndex:"releaseId",key:"releaseId",filter:!0,width:100,type:"select"},isInForm:!1,form:{type:"select",field:"releaseId",optionData:[{label:"\u672a\u4e0a\u62a5",value:"0"},{label:"\u5df2\u4e0a\u62a5",value:"1"},{label:"\u88ab\u9000\u56de",value:"2"}]}},{isInTable:!1,form:{label:"\u9644\u4ef6",field:"zjTzFileList",type:"files",required:!0,showDownloadIcon:!0,onPreview:"bind:_docFilesByOfficeUrl",fetchConfig:{apiName:window.configs.domain+"upload"}}}],method:{addClick:function(e){"all"===a&&(e.btnCallbackFn.closeDrawer(),e.btnCallbackFn.clearSelectedRows(),s.b.warn("\u8bf7\u9009\u62e9\u53f3\u4e0a\u89d2\u9879\u76ee\uff01"))},editClick:function(t){"1"===t.selectedRows[0].releaseId?(t.btnCallbackFn.closeDrawer(),s.b.warn("\u5df2\u4e0a\u62a5\u7684\u4e0d\u80fd\u4fee\u6539!"),e.table.clearSelectedRows()):e.table.clearSelectedRows()},shangBaoClick:function(t){e.table.clearSelectedRows();var a=t.props.myFetch;if(t.selectedRows.length>0){for(var l=[],o=0;o<t.selectedRows.length;o++)"1"===t.selectedRows[o].releaseId&&l.push(t.selectedRows[o].releaseId);l.length>0?s.b.warn("\u5df2\u4e0a\u62a5\u7684\u6d88\u606f\u4e0d\u80fd\u4e0a\u62a5\uff01"):h({title:"\u786e\u5b9a\u4e0a\u62a5\u4e48?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){a("batchReleaseZjTzRiskAnalysis",t.selectedRows).then(function(t){t.data;var a=t.success,l=t.message;a?(s.b.success(l),e.table.refresh()):s.b.error(l)})}})}else s.b.warn("\u8bf7\u9009\u62e9\u6570\u636e\uff01")},tuiHuiClick:function(t){e.table.clearSelectedRows();var a=t.props.myFetch;if(t.selectedRows.length>0){for(var l=[],o=0;o<t.selectedRows.length;o++)"0"!==t.selectedRows[o].releaseId&&"2"!==t.selectedRows[o].releaseId||l.push(t.selectedRows[o].releaseId);l.length>0?s.b.warn("\u672a\u4e0a\u62a5/\u88ab\u9000\u56de\u7684\u6d88\u606f\u4e0d\u80fd\u9000\u56de\uff01"):h({title:"\u786e\u5b9a\u9000\u56de\u4e48?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){a("batchRecallZjTzRiskAnalysis",t.selectedRows).then(function(t){var a=t.success,l=t.message;a?(s.b.success(l),e.table.refresh()):s.b.error(l)})}})}else s.b.warn("\u8bf7\u9009\u62e9\u6570\u636e\uff01")},filestExport:function(t){e.table.clearSelectedRows();var a=t.props.myFetch;t.selectedRows.length>0?h({title:"\u786e\u5b9a\u5bfc\u51fa\u9644\u4ef6\u4e48?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){a("batchExportZjTzRiskAnalysisFile",t.selectedRows).then(function(t){var a=t.success,l=t.message,o=t.data;a?(s.b.success(l),window.location.href=o,e.table.refresh(),e.table.clearSelectedRows()):s.b.error(l)})}}):s.b.warn("\u8bf7\u9009\u62e9\u6570\u636e")},delClick:function(t){var a=t.props.myFetch,l=[];if(t.selectedRows.length>0){for(var o=0;o<t.selectedRows.length;o++)"1"===t.selectedRows[o].releaseId&&l.push(t.selectedRows[o].releaseId);l.length>0?(t.btnCallbackFn.closeDrawer(),s.b.warn("\u5df2\u4e0a\u62a5\u7684\u4e0d\u80fd\u5220\u9664!"),e.table.clearSelectedRows()):h({title:"\u786e\u5b9a\u5220\u9664\u4e48?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){a("batchDeleteUpdateZjTzRiskAnalysis",t.selectedRows).then(function(t){var a=t.success,l=t.message;a?(s.b.success(l),e.table.refresh(),e.table.clearSelectedRows()):s.b.error(l)})}})}else s.b.warn("\u8bf7\u9009\u62e9\u6570\u636e!")}},actionBtns:{apiName:"getSysMenuBtn",otherParams:function(e){var t=e.Pprops;return{menuParentId:t.routerInfo.routeData[t.routerInfo.curKey]._value,tableField:"projectInfo"}}}})))}}]),t}(p.Component);t.default=I},yu8Y:function(e,t,a){}}]);