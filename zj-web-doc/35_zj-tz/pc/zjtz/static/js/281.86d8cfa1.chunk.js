(window.webpackJsonp=window.webpackJsonp||[]).push([[281],{DP6G:function(e,n,t){"use strict";t.r(n);var a=t("bqt4"),o=t.n(a),c=t("+n0K"),r=(t("3fBH"),t("r0ML")),l=t.n(r),i=(t("C/2i"),t("ID3L"),t("+K9n"),t("0DJy"),t("tpuf"),t("fx2i"),t("40Q9"),t("VpwF"),t("9M8h"),t("w9C0"),t("HJbo"),t("daJc"),t("Sw1S"),t("07Zm"),t("/MJF")),u=t("5D1j"),f=(t("739E"),t("j0L1"),t("5fiz"),t("NExk"),t("ftLu")),s=(t("Y4z8"),t("xaqS")),p=t("+Wf6");n.default=Object(r.memo)(function(e){var n=e.inputProps,t=n.qnnTableConfig,a=n.optionConfig,b=void 0===a?{}:a,d=n.value,m=n.canInput,g=n.onChange,v=Object(c.s)(n,["qnnTableConfig","optionConfig","value","canInput","onChange"]),h=t.antd||{};"function"==typeof h.rowKey&&console.error("\n                    qnn-form\u4f7f\u7528\u9519\u8bef\uff1a\n                        \u5b57\u6bb5\uff1a".concat(e.inputProps.field,"\n                        antd.rowKey\u4e0d\u652f\u6301\u8bbe\u7f6e\u4e3afunction\n                "));var C,j=Object(r.useRef)(),w="radio"===t.selectType,O=Object(r.useRef)(!1),y=Object(r.useRef)(null),k=Object(r.useState)(!1),S=Object(c.p)(k,2),E=S[0],x=S[1],R=function(){return d?w?[Object(c.f)({},h.rowKey,d)]:d:[]},D=Object(r.useState)(R()),P=Object(c.p)(D,2),q=P[0],_=P[1],K=Object(r.useState)(w?[]:q||[]),B=Object(c.p)(K,2),J=B[0],F=B[1],I=Object(r.useState)(void 0),L=Object(c.p)(I,2),T=L[0],V=L[1],z={};w?d&&(C=d):(z.mode="multiple",C=d?d.map(function(e){return e[b.value]}):[]),l.a.useEffect(function(){return function(){return O.current=!0}},[]),l.a.useEffect(function(){var e;w&&!J.length&&d&&(e=Object(c.t)(o.a.mark(function e(){var n,a,c,r,l,i,u,f,s,p,b,m,g,v,C,j,w,y,k,S;return o.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.fetch,a=t.fetchConfig,c=t.qnnFormProps,r=c.form,l=c.funcCallBackParams,i=c.qnnformData.match,u=c.fns,f=u.bind,s=u.tool,p=s.getFetchParams,b=s.msg,m=a.otherParams,g=a.params,v=a.apiName,e.next=4,p({params:g,otherParams:m,match:i,form:r,bind:f,funcCallBackParams:l});case 4:return(C=e.sent)[h.rowKey]=d,e.next=8,n(v,C);case 8:j=e.sent,w=j.success,y=j.data,k=j.message,S=j.code,w?!O.current&&F(y):b.error(k,S);case 14:case"end":return e.stop()}},e)})),function(){return e.apply(this,arguments)})()},[d]);var H=function(e){var n={};return t.getRowSelection&&(n=t.getRowSelection(e)),Object(c.l)({},n,{onChange:function(){for(var e,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];a[0];var c=a[1];n.onChange&&(e=n).onChange.apply(e,a),_(c)}})},M=Object(r.useCallback)(function(e){e&&(t.wrappedComponentRef&&t.wrappedComponentRef(e),j.current=e,setTimeout(function(){y.current&&y.current.blur()},500))},[]),A=Object(r.useCallback)(function(){_([]),j.current.setSelectedRows([]),g(w?void 0:[],{itemData:[]})},[]),N=Object(r.useCallback)(function(e){var n,t;g(e,{itemData:[(n={},Object(c.f)(n,b.value,e),Object(c.f)(n,b.label,e),n)]}),F([(t={},Object(c.f)(t,b.value,e),Object(c.f)(t,b.label,e),t)]),_([]),x(!1)},[]),G=Object(r.useCallback)(function(e,n){e&&x(!E),v.onDropdownVisibleChange&&v.onDropdownVisibleChange(e)},[E]);return l.a.createElement(l.a.Fragment,null,l.a.createElement(s.a,Object(c.q)({dropdownRender:function(){var e,n=[{field:"_ok",label:l.a.createElement("div",{key:"_ok"},l.a.createElement(i.a,null)," \u786e\u5b9a\u9009\u4e2d"),disabled:!q.length,onClick:function(){!function(){var e,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];w&&!O.current&&F(n);var t=w?null===(e=n[0])||void 0===e?void 0:e[h.rowKey]:n;g(t,{itemData:n})}(q),x(!1)}},{field:"_cancelSelect",type:"danger",label:l.a.createElement("div",{key:"_cancelSelect"},l.a.createElement(u.a,null)," \u53d6\u6d88\u9009\u4e2d"),disabled:!q.length,onClick:function(){A(),x(!1)}},{field:"_closePan",label:l.a.createElement("div",{key:"_closePan"},"\u5173\u95ed"),ghost:!0,onClick:function(){_(R()),x(!1)}},{field:"_diyInput",type:"Component",hide:!m,Component:l.a.createElement("div",{key:"_diyInput",style:{color:"#777",textAlign:"right",lineHeight:"32px"}},"\u81ea\u5b9a\u4e49\u8f93\u5165\uff1a",l.a.createElement(f.a.Search,(e={placeholder:"\u8bf7\u8f93\u5165...",allowClear:!0,enterButton:"\u786e\u5b9a",style:{width:"75%"}},Object(c.f)(e,"allowClear",!0),Object(c.f)(e,"onSearch",N),Object(c.f)(e,"onChange",function(e){return V(e.target.value)}),Object(c.f)(e,"value",T||(J.length?J[0][b.label]:C)),e))),style:{float:"right",padding:0}}];return l.a.createElement("div",{style:{padding:"8px 8px 0px 8px"}},l.a.createElement(p.default,Object(c.q)({pageSize:5,defaultSelectedRows:q},t,{actionBtns:[].concat(Object(c.r)(t.actionBtns||[]),n),getRowSelection:H,wrappedComponentRef:M})))},onDropdownVisibleChange:G},v,z,{value:C,onClear:A,open:E,ref:y}),J.length&&J.map(function(e){return console.assert(e[b.value],"\u4e0b\u62c9\u8868\u683c\u7c7b\u578b\u7ec4\u4ef6\u5fc5\u987b\u914d\u7f6eoptionConfig.value \u5e76\u4e14value\u5fc5\u987b\u6709\u503c\uff01\u8bf7\u68c0\u67e5\u3002"),l.a.createElement(s.a.Option,{key:e[b.value]},e[b.label])})))})}}]);