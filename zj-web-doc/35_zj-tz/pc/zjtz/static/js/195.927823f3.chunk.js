(window.webpackJsonp=window.webpackJsonp||[]).push([[195],{dn24:function(e,t,a){"use strict";a.r(t);a("x/6R"),a("MRnW"),a("IdsT"),a("l9AF"),a("orcL"),a("w9C0");var n=a("XW+2"),i=(a("3fBH"),a("g2mn")),s=(a("fx2i"),a("cZi0")),o=a("UpC8"),l=a("Id3l"),r=a("RNsw"),d=a("OR/T"),c=a("bn5B"),p=a("PnTt"),h=a("r0ML"),m=a.n(h),u=a("6eYn"),f=a("vcLm"),b=a("05wd"),I=a.n(b),w=a("U32T"),g={antd:{rowKey:"cashExcelId",size:"small",scroll:{y:.65*document.documentElement.clientHeight}},drawerConfig:{width:"1100px"},limit:99999,curPage:1,paginationConfig:!1,firstRowIsSearch:!1,isShowRowSelect:!1,formItemLayout:{labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}}}},S=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(c.a)(t).call(this,e))).handleCancelSend=function(){a.setState({visibleSend:!1,loadingSend:!1})},a.state={cashId:e.match.params.cashId||"",visibleSend:!1,loadingSend:!1,apih5FlowStatus:e.match.params.apih5FlowStatus||"",isWorkId:e.match.params.isWorkId||""},a}return Object(p.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.cashId,l=t.visibleSend,r=t.loadingSend,d=t.apih5FlowStatus,c=this.props.myPublic.domain;return m.a.createElement("div",{className:I.a.root},m.a.createElement(u.a,Object(o.a)({},this.props,{fetch:this.props.myFetch,upload:this.props.myUpload,headers:{token:this.props.loginAndLogoutInfo.loginInfo.token},fetchConfig:{apiName:"getZjTzCashExcelList",otherParams:function(){return"1"===e.state.isWorkId?{workId:a}:{cashId:a}}},wrappedComponentRef:function(t){e.tableGM=t},method:{importClick:function(t){e.setState({visibleSend:!0})},goBack:function(e){e.props.dispatch(Object(w.c)())},hideClick:function(){return"1"===d||"2"===d}},actionBtns:{apiName:"getSysMenuBtn",otherParams:function(e){var t=e.Pprops;return{menuParentId:t.routerInfo.routeData[t.routerInfo.curKey]._value,tableField:"projectInfo"}}}},g,{formConfig:[{isInTable:!1,form:{field:"cashExcelId",type:"string",hide:!0}},{isInTable:!1,form:"1"===this.state.isWorkId?{label:"\u4e3b\u952eid",field:"workId",initialValue:a,hide:!0}:{label:"\u4e3b\u952eid",field:"cashId",initialValue:a,hide:!0}},{table:{title:"\u9879\u76ee",dataIndex:"ext11",key:"ext11"},isInForm:!1},{table:{title:"\u884c\u6b21",width:80,dataIndex:"ext12",key:"ext12",align:"center",defaultSortOrder:"descend"},isInForm:!1},{table:{title:"\u672c\u5e74\u7d2f\u8ba1\u91d1\u989d",width:200,dataIndex:"ext13",key:"ext13"},isInForm:!1},{table:{title:"\u4e0a\u5e74\u540c\u671f\u7d2f\u8ba1\u91d1\u989d",dataIndex:"ext14",key:"ext14"},isInForm:!1}]})),m.a.createElement(n.a,{width:"500px",style:{top:"0"},title:"\u5bfc\u5165",visible:l,footer:null,onCancel:this.handleCancelSend,bodyStyle:{width:"500px"},centered:!0,destroyOnClose:this.handleCancelSend,wrapClassName:"modals"},m.a.createElement(i.a,{spinning:r},m.a.createElement("div",{style:{marginLeft:"15px"},onClick:function(){window.open(c+"upload/template/zjtz/cash.xlsx")}},"\u6a21\u677f\u4e0b\u8f7d\uff1a",m.a.createElement("a",null,"\u73b0\u91d1\u6d41\u91cf\u8868")),m.a.createElement(f.a,Object(o.a)({},this.props,{match:this.props.match,fetch:this.props.myFetch,upload:this.props.myUpload,headers:{token:this.props.loginAndLogoutInfo.loginInfo.token},formConfig:[{label:"\u9644\u4ef6",field:"fileList",required:!0,type:"files",fetchConfig:{apiName:window.configs.domain+"upload",otherParams:{name:"\u73b0\u91d1\u6d41\u91cf\u8868"}},showDownloadIcon:!0,onPreview:"bind:_docFilesByOfficeUrl"}],btns:[{name:"cancel",type:"dashed",label:"\u53d6\u6d88",isValidate:!1,onClick:function(){e.setState({visibleSend:!1,loadingSend:!1})}},{name:"submit",type:"primary",label:"\u4fdd\u5b58",onClick:function(t){e.setState({loadingSend:!0}),"1"===e.state.isWorkId?t.values.workId=a:t.values.cashId=a,e.props.myFetch("batchImportZjTzCashExcel",t.values).then(function(t){var a=t.success,n=t.message;a?(s.b.success(n),e.tableGM.refresh(),e.setState({visibleSend:!1,loadingSend:!1})):(s.b.error(n),e.tableGM.refresh(),e.setState({visibleSend:!1,loadingSend:!1}))})}}],formItemLayout:{labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:20},sm:{span:20}}}})))))}}]),t}(h.Component);t.default=S}}]);