(window.webpackJsonp=window.webpackJsonp||[]).push([[139],{VI9a:function(e,t,a){},gLcV:function(e,t,a){"use strict";a.r(t);a("x/6R"),a("zIPO"),a("8Qi2"),a("MRnW"),a("IdsT"),a("l9AF"),a("orcL"),a("3fBH");var o=a("g2mn"),n=a("UpC8"),l=(a("fx2i"),a("cZi0")),i=a("Id3l"),s=a("RNsw"),r=a("OR/T"),d=a("bn5B"),p=a("PnTt"),c=(a("w9C0"),a("XW+2")),m=a("r0ML"),f=a.n(m),u=a("6eYn"),b=a("vcLm"),h=a("VI9a"),I=a.n(h),w=c.a.confirm,g={antd:{rowKey:function(e){return e.compSupReportId},size:"small"},drawerConfig:{width:"1000px"},paginationConfig:{position:"bottom"},firstRowIsSearch:!1,isShowRowSelect:!0,formItemLayout:{labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}}}},C=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(r.a)(this,Object(d.a)(t).call(this,e))).handleCancelSend=function(){a.setState({visibleSend:!1,loadingSend:!1})},a.state={visibleSend:!1,loadingSend:!1,compSupReportId:"",companyId:e.loginAndLogoutInfo.loginInfo.userInfo.companyList[0].companyId,companyName:e.loginAndLogoutInfo.loginInfo.userInfo.companyList[0].companyName,proNameId:e.loginAndLogoutInfo.loginInfo.userInfo.curCompany?e.loginAndLogoutInfo.loginInfo.userInfo.curCompany.projectId:""},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.visibleSend,i=t.loadingSend,s=t.compSupReportId,r=t.companyId,d=t.proNameId;return f.a.createElement("div",{className:I.a.root},f.a.createElement(u.a,Object(n.a)({},this.props,{fetch:this.props.myFetch,upload:this.props.myUpload,headers:{token:this.props.loginAndLogoutInfo.loginInfo.token},wrappedComponentRef:function(t){e.table=t},fetchConfig:{apiName:"getZjTzCompSupReportList",otherParams:{projectId:d}}},g,{formConfig:[{isInTable:!1,form:{field:"compSupReportId",type:"string",hide:!0}},{isInTable:!1,form:{field:"companyId",type:"string",initialValue:r,hide:!0}},{isInSearch:!1,table:{title:"\u6807\u9898",dataIndex:"title",key:"title",width:300,tooltip:23,onClick:"detail"},form:{type:"string",field:"title",placeholder:"\u8bf7\u8f93\u5165",required:!0,spanForm:12,formItemLayout:{labelCol:{xs:{span:21},sm:{span:6}},wrapperCol:{xs:{span:21},sm:{span:18}}}}},{isInTable:!1,form:{label:"\u68c0\u67e5\u65e5\u671f",type:"date",required:!0,field:"checkDate",spanForm:12,formItemLayout:{labelCol:{xs:{span:21},sm:{span:6}},wrapperCol:{xs:{span:21},sm:{span:18}}}}},{table:{title:"\u7763\u67e5\u5206\u7c7b",dataIndex:"supClassName",key:"supClassName"},form:{field:"supClassId",type:"select",optionConfig:{label:"itemName",value:"itemId"},fetchConfig:{apiName:"getBaseCodeSelect",otherParams:{itemId:"duChaFenLei"}},required:!0,placeholder:"\u8bf7\u9009\u62e9",spanForm:12,formItemLayoutForm:{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}}}},{table:{title:"\u7763\u67e5\u90e8\u95e8",dataIndex:"supDeptId",key:"supDeptId",type:"select",filter:!0},form:{field:"supDeptId",type:"select",required:!0,optionConfig:{label:"itemName",value:"itemId"},fetchConfig:{apiName:"getBaseCodeSelect",otherParams:{itemId:"duChaBuMen"}},placeholder:"\u8bf7\u9009\u62e9",spanForm:12,formItemLayoutForm:{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}}}},{table:{title:"\u7763\u67e5\u5bf9\u8c61",dataIndex:"projectId",key:"projectId",type:"select"},form:{label:"\u7763\u67e5\u5bf9\u8c61",field:"projectId",type:"select",showSearch:!0,required:!0,optionConfig:{label:"projectName",value:"projectId"},fetchConfig:{apiName:"getZjTzProManageList"},placeholder:"\u8bf7\u9009\u62e9",formItemLayoutForm:{labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}}}}},{table:{title:"\u68c0\u67e5\u65e5\u671f",dataIndex:"checkDate",width:120,format:"YYYY-MM-DD",key:"checkDate",filter:!0},isInForm:!1,form:{type:"date",field:"checkDate"}},{table:{title:"\u767b\u8bb0\u7528\u6237",dataIndex:"registerPerson",key:"registerPerson",width:100},isInForm:!1},{table:{title:"\u4e0b\u8fbe\u72b6\u6001",dataIndex:"correctiveId",key:"correctiveId",width:120,type:"select",filter:!0},isInForm:!1,form:{type:"select",field:"correctiveId",optionConfig:{label:"label",value:"value"},optionData:[{label:"\u672a\u4e0b\u8fbe",value:"0"},{label:"\u5df2\u4e0b\u8fbe",value:"1"},{label:"\u5df2\u843d\u5b9e",value:"2"}]}},{isInTable:!1,form:{type:"component",field:"diySK1",Component:function(e){return f.a.createElement("div",{style:{width:"100%",backgroundColor:"#eeeded",height:"32px",lineHeight:"32px",borderRadius:"2px",paddingLeft:"10px",marginBottom:"10px",marginTop:"10px"}},"\u7763\u5bdf\u8981\u70b9\u901a\u62a5\u5185\u5bb9\uff08\u5206\u8868\u626c\u3001\u5efa\u8bae\u3001\u6574\u6539\u3001\u5904\u7f5a\u56db\u4e2a\u65b9\u9762\u4f9d\u6b21\u586b\u5199\uff09")}}},{isInTable:!1,form:{type:"qnnTable",field:"zjTzSupContentList",colStyle:{paddingLeft:12},incToForm:!0,qnnTableConfig:{actionBtnsPosition:"top",antd:{rowKey:"supContentId",size:"small"},drawerConfig:{width:"1000px"},limit:999,curPage:1,paginationConfig:!1,firstRowIsSearch:!1,isShowRowSelect:!0,formItemLayout:{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},wrappedComponentRef:function(t){e.zjTzSupContentListTable=t},formConfig:[{isInTable:!1,form:{label:"\u4e3b\u952eid",field:"supContentId",hide:!0}},{isInForm:!1,table:{width:80,align:"center",title:"\u5e8f\u53f7",dataIndex:"no",key:"no",render:function(e,t,a){return a+1}}},{table:{title:"\u7c7b\u578b",width:80,dataIndex:"typeId",key:"typeId",tdEdit:!0,type:"select"},form:{label:"\u7c7b\u578b",type:"select",field:"typeId",allowClear:!1,placeholder:"\u8bf7\u9009\u62e9",optionConfig:{label:"itemName",value:"itemId"},fetchConfig:{apiName:"getBaseCodeSelect",otherParams:{itemId:"leiXing"}}}},{table:{title:"\u7ec6\u76ee",width:300,tooltip:23,dataIndex:"detail",key:"detail",tdEdit:!0},form:{type:"textarea",autoSize:{minRows:1,maxRows:4},field:"detail",placeholder:"\u8bf7\u8f93\u5165"}},{table:{title:"\u662f\u5426\u9700\u8981\u6574\u6539",width:100,dataIndex:"needCorrectiveId",key:"needCorrectiveId",tdEdit:!0,fieldsConfig:{type:"select",field:"needCorrectiveId",optionData:[{label:"\u662f",value:"1"},{label:"\u5426",value:"0"}],disabled:function(e){return"1"===e.record.typeId}},type:"select"},form:{label:"\u662f\u5426\u9700\u8981\u6574\u6539",field:"needCorrectiveId",type:"select",placeholder:"\u8bf7\u8f93\u5165",optionData:[{label:"\u662f",value:"1"},{label:"\u5426",value:"0"}]}},{table:{title:"\u6574\u6539\u843d\u5b9e\u60c5\u51b5",width:300,tooltip:23,dataIndex:"correctiveCase",key:"correctiveCase",tdEdit:!1},form:{label:"\u6574\u6539\u843d\u5b9e\u60c5\u51b5",field:"correctiveCase",type:"textarea",autoSize:{minRows:1,maxRows:4},placeholder:"\u8bf7\u8f93\u5165"}}],actionBtns:[{name:"addRow",icon:"plus",type:"primary",label:"\u65b0\u589e\u884c"},{name:"del",icon:"delete",type:"danger",label:"\u5220\u9664"}]}}},{isInTable:!1,form:{label:"\u68c0\u67e5\u65b9\u9644\u4ef6",field:"zjTzFileList",type:"files",fetchConfig:{apiName:window.configs.domain+"upload",otherParams:{name:"\u6295\u8d44\u4e8b\u4e1a\u90e8-\u7efc\u5408\u7763\u67e5\u62a5\u544a"}},showDownloadIcon:!0,onPreview:"bind:_docFilesByOfficeUrl"}},{isInTable:!1,form:{label:"\u9879\u76ee\u65b9\u9644\u4ef6",field:"replyFileList",addDisabled:!0,editDisabled:!0,type:"files",fetchConfig:{apiName:window.configs.domain+"upload",otherParams:{name:"\u6295\u8d44\u4e8b\u4e1a\u90e8-\u7efc\u5408\u7763\u67e5\u62a5\u544a"}},showDownloadIcon:!0,onPreview:"bind:_docFilesByOfficeUrl"}},{isInTable:!1,form:{field:"registerDate",type:"date",label:"\u767b\u8bb0\u65e5\u671f",required:!0,addDisabled:!0,editDisabled:!0,placeholder:"\u8bf7\u8f93\u5165",spanForm:12,formItemLayoutForm:{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}},initialValue:function(){return new Date}}},{isInTable:!1,form:{field:"registerPerson",type:"string",label:"\u767b\u8bb0\u7528\u6237",required:!0,addDisabled:!0,editDisabled:!0,placeholder:"\u8bf7\u8f93\u5165",spanForm:12,formItemLayoutForm:{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}},initialValue:function(e){return e.loginAndLogoutInfo.loginInfo.userInfo.realName}}}],method:{editClick:function(t){1===t.selectedRows.length?"0"===t.selectedRows[0].correctiveId?e.table.clearSelectedRows():(t.btnCallbackFn.closeDrawer(),l.b.warn("\u5df2\u4e0b\u8fbe/\u5df2\u843d\u5b9e\u7684\u4e0d\u80fd\u4fee\u6539!"),e.table.clearSelectedRows()):l.b.warn("\u8bf7\u9009\u62e9\u4e00\u6761\u6570\u636e")},cheHuiClick:function(t){e.table.clearSelectedRows();var a=t.props.myFetch;if(t.selectedRows.length>0){for(var o=[],n=0;n<t.selectedRows.length;n++)"0"!==t.selectedRows[n].correctiveId&&"2"!==t.selectedRows[n].correctiveId||o.push(t.selectedRows[n].correctiveId);o.length>0?l.b.warn("\u672a\u6574\u6539\u4e0b\u8fbe\u7684\u6d88\u606f\u4e0d\u80fd\u64a4\u56de\uff01"):w({title:"\u786e\u5b9a\u64a4\u56de\u4e48?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){a("batchRecallZjTzCompSupReport",t.selectedRows).then(function(t){var a=t.success,o=t.message;a?(l.b.success(o),e.table.refresh()):l.b.error(o)})}})}else l.b.warn("\u8bf7\u9009\u62e9\u6570\u636e")},zhengGaiXiaDa:function(t){e.table.clearSelectedRows(),t.selectedRows.length>0?1===t.selectedRows.length?"0"===t.selectedRows[0].correctiveId||"2"===t.selectedRows[0].correctiveId?e.setState({visibleSend:!0,compSupReportId:t.selectedRows[0].compSupReportId}):l.b.warn("\u5df2\u6574\u6539\u4e0b\u8fbe\u7684\u6d88\u606f\u4e0d\u80fd\u6574\u6539\u4e0b\u8fbe\uff01"):l.b.warn("\u8bf7\u9009\u62e9\u4e00\u6761\u6570\u636e"):l.b.warn("\u8bf7\u9009\u62e9\u6570\u636e")},filestExport:function(t){e.table.clearSelectedRows();var a=t.props.myFetch;t.selectedRows.length>0?w({title:"\u786e\u5b9a\u5bfc\u51fa\u9644\u4ef6\u4e48?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){a("batchExportZjTzCompSupReportFile",t.selectedRows).then(function(t){var a=t.success,o=t.message,n=t.data;a?(l.b.success(o),window.location.href=n,e.table.refresh(),e.table.clearSelectedRows()):l.b.error(o)})}}):l.b.warn("\u8bf7\u9009\u62e9\u6570\u636e")},delClick:function(t){var a=t.props.myFetch,o=[];if(t.selectedRows.length>0){for(var n=0;n<t.selectedRows.length;n++)"1"===t.selectedRows[n].correctiveId&&o.push(t.selectedRows[n].correctiveId);o.length>0?(t.btnCallbackFn.closeDrawer(),l.b.warn("\u5df2\u6574\u6539\u4e0b\u8fbe\u7684\u4e0d\u80fd\u5220\u9664!"),e.table.clearSelectedRows()):w({title:"\u786e\u5b9a\u5220\u9664\u4e48?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){a("batchDeleteUpdateZjTzCompSupReport",t.selectedRows).then(function(t){var a=t.success,o=t.message;a?(l.b.success(o),e.table.refresh(),e.table.clearSelectedRows()):l.b.error(o)})}})}else l.b.warn("\u8bf7\u9009\u62e9\u6570\u636e!")}},actionBtns:{apiName:"getSysMenuBtn",otherParams:function(e){var t=e.Pprops;return{menuParentId:t.routerInfo.routeData[t.routerInfo.curKey]._value,tableField:"projectInfo"}}},fieldsValueChange:function(t,a,o){t.form,t.name;if(a&&a[0]&&"zjTzSupContentList"===a[0].name[0]&&o&&o.zjTzSupContentList){for(var n=o.zjTzSupContentList,l=0;l<n.length;l++)"1"===n[l].typeId&&(n[l].needCorrectiveId="0");e.zjTzSupContentListTable.qnnSetState({data:o.zjTzSupContentList})}}})),f.a.createElement(c.a,{width:"600px",style:{top:"0"},title:"\u4e0b\u8fbe",visible:a,footer:null,onCancel:this.handleCancelSend,bodyStyle:{width:"600px"},centered:!0,destroyOnClose:this.handleCancelSend,wrapClassName:"modals"},f.a.createElement(o.a,{spinning:i},f.a.createElement(b.a,Object(n.a)({},this.props,{match:this.props.match,fetch:this.props.myFetch,upload:this.props.myUpload,headers:{token:this.props.loginAndLogoutInfo.loginInfo.token},formConfig:[{type:"string",field:"compSupReportId",initialValue:s,hide:!0},{field:"contentDesc",type:"textarea",label:"\u5185\u5bb9\u63cf\u8ff0",required:!0,placeholder:"\u8bf7\u8f93\u5165"}],btns:[{name:"cancel",type:"dashed",label:"\u53d6\u6d88",isValidate:!1,onClick:function(){e.setState({visibleSend:!1,loadingSend:!1})}},{name:"submit",type:"primary",label:"\u4fdd\u5b58",onClick:function(t){e.setState({loadingSend:!0}),e.props.myFetch("correctiveZjTzCompSupReport",t.values).then(function(t){var a=t.success,o=t.message;a?(l.b.success(o),e.table.refresh(),e.setState({visibleSend:!1,loadingSend:!1})):l.b.error(o)})}}],formItemLayout:{labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:20},sm:{span:20}}}})))))}}]),t}(m.Component);t.default=C}}]);