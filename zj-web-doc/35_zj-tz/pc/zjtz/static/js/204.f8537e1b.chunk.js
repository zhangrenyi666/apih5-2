(window.webpackJsonp=window.webpackJsonp||[]).push([[204],{"5wTe":function(e,a,n){"use strict";n.r(a);n("9U97"),n("zIPO"),n("8Qi2"),n("IdsT"),n("S26F"),n("pBsb");var o=n("UpC8"),t=(n("fx2i"),n("cZi0")),l=n("Id3l"),r=n("RNsw"),s=n("OR/T"),i=n("bn5B"),p=n("PnTt"),m=n("r0ML"),d=n.n(m),c=n("6eYn"),f=n("U8v4"),u=n("XrYm"),b=n.n(u),I={antd:{rowKey:function(e){return e.designChangeId},size:"small"},drawerConfig:{width:"1100px"},paginationConfig:{position:"bottom"},firstRowIsSearch:!1,isShowRowSelect:!1},g=function(e){function a(e){var n;return Object(l.a)(this,a),(n=Object(s.a)(this,Object(i.a)(a).call(this,e))).state={proNameVal:e.loginAndLogoutInfo.loginInfo.userInfo.curCompany?e.loginAndLogoutInfo.loginInfo.userInfo.curCompany.projectShortName:"",proNameId:e.loginAndLogoutInfo.loginInfo.userInfo.curCompany?e.loginAndLogoutInfo.loginInfo.userInfo.curCompany.projectId:"",realName:e.loginAndLogoutInfo.loginInfo.userInfo.realName},n}return Object(p.a)(a,e),Object(r.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,a=this.state,n=a.realName,l=a.proNameId,r=a.proNameVal;return d.a.createElement("div",{className:b.a.root},d.a.createElement(c.a,Object(o.a)({},this.props,{fetch:this.props.myFetch,upload:this.props.myUpload,headers:{token:this.props.loginAndLogoutInfo.loginInfo.token},wrappedComponentRef:function(a){e.table=a},fetchConfig:{apiName:"getZjTzDesignChangeList",otherParams:{projectId:l}}},I,{formConfig:[{isInTable:!1,form:{field:"designChangeId",type:"string",hide:!0}},{isInTable:!1,form:{field:"projectName",hide:!0,type:"string",placeholder:"\u8bf7\u8f93\u5165",initialValue:function(){return r}}},{table:{title:"\u9879\u76ee\u540d\u79f0",dataIndex:"projectId",key:"projectId",fixed:"left",type:"select",filter:!0},form:{field:"projectId",type:"select",showSearch:!0,initialValue:l,required:!0,addDisabled:!0,disabled:!0,editDisabled:!0,optionConfig:{label:"projectName",value:"projectId"},fetchConfig:{apiName:"getZjTzProManageList"},placeholder:"\u8bf7\u8f93\u5165",formItemLayoutForm:{labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}}}}},{table:{title:"\u5b50\u9879\u76ee\u540d\u79f0",filter:!0,dataIndex:"subprojectInfoId",key:"subprojectInfoId",type:"select"},form:{type:"select",showSearch:!0,label:"\u5b50\u9879\u76ee\u540d\u79f0",field:"subprojectInfoId",placeholder:"\u8bf7\u8f93\u5165",optionConfig:{label:"subprojectName",value:"subprojectInfoId"},fetchConfig:{apiName:"getZjTzProSubprojectInfoList",otherParams:{projectId:l}},formItemLayout:{labelCol:{xs:{span:21},sm:{span:3}},wrapperCol:{xs:{span:21},sm:{span:21}}}}},{table:{title:"\u53d8\u66f4\u6b21\u6570",width:120,dataIndex:"changeNum",key:"changeNum"},isInForm:!1},{table:{title:"<div>\u53d8\u66f4\u603b\u91d1\u989d<br>\uff08\u4e07\u5143\uff09</div>",width:120,dataIndex:"changeAmount",key:"changeAmount"},isInForm:!1},{isInTable:!1,form:{label:"\u8bbe\u8ba1\u9636\u6bb5",field:"designStageId",type:"select",placeholder:"\u8bf7\u9009\u62e9",required:!0,editDisabled:!0,optionConfig:{label:"itemName",value:"itemId"},fetchConfig:{apiName:"getBaseCodeSelect",otherParams:{itemId:"sheJiJieDuan"}},formItemLayout:{labelCol:{xs:{span:21},sm:{span:3}},wrapperCol:{xs:{span:21},sm:{span:21}}}}},{isInTable:!1,form:{label:"\u53d8\u66f4\u7b49\u7ea7",field:"changeLevelId",type:"select",placeholder:"\u8bf7\u9009\u62e9",required:!0,optionConfig:{label:"itemName",value:"itemId"},fetchConfig:{apiName:"getBaseCodeSelect",otherParams:{itemId:"bianGengDengJi"}},spanForm:12,formItemLayout:{labelCol:{xs:{span:21},sm:{span:6}},wrapperCol:{xs:{span:21},sm:{span:18}}}}},{isInTable:!1,form:{label:"\u662f\u5426\u6709\u52a8\u6001\u8bbe\u8ba1\u673a\u5236",field:"dynamicId",required:!0,type:"select",optionData:[{label:"\u662f",value:"1"},{label:"\u5426",value:"0"}],spanForm:12,formItemLayout:{labelCol:{xs:{span:21},sm:{span:7}},wrapperCol:{xs:{span:21},sm:{span:17}}}}},{isInTable:!1,form:{label:"\u53d8\u66f4\u6027\u8d28",field:"changeNatureId",type:"select",placeholder:"\u8bf7\u8f93\u5165",required:!0,optionConfig:{label:"itemName",value:"itemId"},fetchConfig:{apiName:"getBaseCodeSelect",otherParams:{itemId:"bianGengXingZhi"}},formItemLayout:{labelCol:{xs:{span:21},sm:{span:3}},wrapperCol:{xs:{span:21},sm:{span:21}}}}},{isInTable:!1,form:{label:"\u8bbe\u8ba1\u53d8\u66f4\u540d\u79f0",field:"designChangeName",type:"textarea",placeholder:"\u8bf7\u8f93\u5165",required:!0,spanForm:12,formItemLayout:{labelCol:{xs:{span:21},sm:{span:6}},wrapperCol:{xs:{span:21},sm:{span:18}}}}},{isInTable:!1,form:{label:"\u8bbe\u8ba1\u53d8\u66f4\u7f16\u53f7",field:"designChangeNumber",type:"string",placeholder:"\u8bf7\u8f93\u5165",required:!0,spanForm:12,formItemLayout:{labelCol:{xs:{span:21},sm:{span:6}},wrapperCol:{xs:{span:21},sm:{span:18}}}}},{isInTable:!1,form:{label:"\u53d8\u66f4\u589e\u51cf\u91d1\u989d",field:"changeAmount",type:"number",formatter:function(e){return e?"".concat(e.replace?e.replace(/(\u4e07|\u5143)/gi,""):e,"\u4e07\u5143"):e},parser:function(e){return e?e.replace(/(\u4e07|\u5143)/gi,""):e},placeholder:"\u8bf7\u8f93\u5165",required:!0,spanForm:12,formItemLayout:{labelCol:{xs:{span:21},sm:{span:6}},wrapperCol:{xs:{span:21},sm:{span:18}}}}},{isInTable:!1,form:{label:"\u53d8\u66f4\u65f6\u95f4",field:"changeDate",type:"date",placeholder:"\u8bf7\u9009\u62e9",required:!0,spanForm:12,formItemLayout:{labelCol:{xs:{span:21},sm:{span:6}},wrapperCol:{xs:{span:21},sm:{span:18}}}}},{isInTable:!1,form:{label:"\u8bbe\u8ba1\u5185\u5bb9\u7b80\u8981\u63cf\u8ff0",field:"content",type:"textarea",required:!0,formItemLayout:{labelCol:{xs:{span:21},sm:{span:3}},wrapperCol:{xs:{span:21},sm:{span:21}}}}},{isInTable:!1,form:{type:"textarea",label:"\u5907\u6ce8",field:"remarks",placeholder:"\u8bf7\u8f93\u5165",required:!1,formItemLayout:{labelCol:{xs:{span:21},sm:{span:3}},wrapperCol:{xs:{span:21},sm:{span:21}}}}},{isInTable:!1,form:{field:"createTime",type:"date",label:"\u521b\u5efa\u65e5\u671f",addDisabled:!0,editDisabled:!0,placeholder:"\u8bf7\u8f93\u5165",spanForm:12,formItemLayout:{labelCol:{xs:{span:21},sm:{span:6}},wrapperCol:{xs:{span:21},sm:{span:18}}},initialValue:function(){return new Date}}},{isInTable:!1,form:{field:"createUserName",type:"string",label:"\u521b\u5efa\u7528\u6237",addDisabled:!0,editDisabled:!0,placeholder:"\u8bf7\u8f93\u5165",spanForm:12,formItemLayout:{labelCol:{xs:{span:21},sm:{span:6}},wrapperCol:{xs:{span:21},sm:{span:18}}},initialValue:n}},{isInTable:!1,form:{label:"\u9644\u4ef6",field:"zjTzFileList",type:"files",fetchConfig:{apiName:window.configs.domain+"upload",otherParams:{name:"\u8bbe\u8ba1\u53d8\u66f4\u7ba1\u7406"}},showDownloadIcon:!0,onPreview:"bind:_docFilesByOfficeUrl",formItemLayout:{labelCol:{xs:{span:21},sm:{span:3}},wrapperCol:{xs:{span:21},sm:{span:21}}},onChange:function(a,n){a&&a[0]&&a[0].name&&("rar"===a[0].name.split(".")[1]||"zip"===a[0].name.split(".")[1]||"7z"===a[0].name.split(".")[1])&&(t.b.warn("\u4e0d\u5141\u8bb8\u4e0a\u4f20rar\u3001zip\u30017z\u683c\u5f0f\u7684\u6587\u4ef6\uff01"),setTimeout(function(){e.table.qnnForm.form.setFieldsValue({zjTzFileList:[]})},200))}}},{isInForm:!1,table:{title:"\u64cd\u4f5c",fixed:"right",dataIndex:"action",key:"action",align:"center",noHaveSearchInput:!0,showType:"tile",width:100,btns:[{name:"PolicyDetail",render:function(e){return"<a>\u8be6\u7ec6\u4fe1\u606f</a>"},onClick:function(e){var a=e.props.myPublic.appInfo.mainModule,n=e.rowData,o=n.designChangeId,t=n.projectName,l=n.projectId,r=n.subprojectInfoId;e.props.dispatch(Object(f.push)("".concat(a,"DesignChangeManageDetail/").concat(o,"/").concat(t,"/").concat(l,"/").concat(r)))}}]}}],method:{addClick:function(e){l?"all"===l?(e.btnCallbackFn.closeDrawer(),e.btnCallbackFn.msg.warning("\u8bf7\u9009\u62e9\u53f3\u4e0a\u89d2\u9879\u76ee\uff01")):e.btnCallbackFn.setActiveKey("0"):(e.btnCallbackFn.closeDrawer(),e.btnCallbackFn.msg.warning("\u8bf7\u9009\u62e9\u53f3\u4e0a\u89d2\u9879\u76ee\uff01"))}},actionBtns:{apiName:"getSysMenuBtn",otherParams:function(e){var a=e.Pprops;return{menuParentId:a.routerInfo.routeData[a.routerInfo.curKey]._value,tableField:"projectInfo"}}}})))}}]),a}(m.Component);a.default=g}}]);