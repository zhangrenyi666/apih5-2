(window.webpackJsonp=window.webpackJsonp||[]).push([[135],{YkMW:function(e,t,a){e.exports={root:"Kzh07SU9-aj0oGldbH5Z2",left:"_3dI3YvPRJb-TK_9sdNcmvh",hr:"_17_GDo-mpN3_yBFc1Nn3H6",right:"_13MOaXsmXyyLDtgPu_XobO",alert:"_2OIc1X93JEk_s7DvUZymxc"}},"b1M/":function(e,t,a){"use strict";a.r(t);var r=a("fbSu"),n=a.n(r),o=a("5T12"),c=a.n(o),i=a("qHWA"),s=a.n(i),l=a("rx6U"),d=a.n(l),m=a("4tJN"),p=a.n(m),u=a("Qsbb"),h=a.n(u),f=(a("9U97"),a("IdsT"),a("l9AF"),a("YqOB")),N=a("Id3l"),b=a("RNsw"),C=a("OR/T"),y=a("bn5B"),k=a("PnTt"),D=(a("NExk"),a("ftLu")),j=a("r0ML"),g=a.n(j),I=a("YkMW"),S=a.n(I),v=a("mrSZ"),T=a("6eYn");function P(e,t){var a=h()(e);if(p.a){var r=p()(e);t&&(r=r.filter(function(t){return d()(e,t).enumerable})),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?P(Object(a),!0).forEach(function(t){Object(f.a)(e,t,a[t])}):s.a?c()(e,s()(a)):P(Object(a)).forEach(function(t){n()(e,t,d()(a,t))})}return e}var F=D.a.Search,_=function(e){function t(){var e,a;Object(N.a)(this,t);for(var r=arguments.length,n=new Array(r),o=0;o<r;o++)n[o]=arguments[o];return(a=Object(C.a)(this,(e=Object(y.a)(t)).call.apply(e,[this].concat(n)))).state={curClickNodeId:null,curClickNodeData:null,loading:!1,treeNodeKeys:{label:"projectShortName",value:"projectId"},searchParams:{}},a.onSearch=function(e){a.setState({searchParams:{projectShortName:e}},a.tree.onLoadData)},a}return Object(k.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.treeNodeKeys,r=t.curClickNodeId,n=t.searchParams;return g.a.createElement("div",{className:S.a.root},g.a.createElement("div",{className:S.a.left,ref:function(t){t&&(e.leftDom=t)}},g.a.createElement("div",{className:S.a.hr,ref:function(t){if(t){var a=function(e){var t=document.getElementsByClassName("ant-layout-content")[0].offsetLeft;r.leftDom.style["flex-basis"]=e.pageX-t+"px"},r=e;t.addEventListener("mousedown",function(t){e.onDragStartPos=t.pageX,document.addEventListener("mousemove",a,!1)},!1),document.addEventListener("mouseup",function(e){document.removeEventListener("mousemove",a,!1)},!1)}}}),g.a.createElement("div",{style:{width:"100%",paddingRight:"18px"}},g.a.createElement(F,{style:{width:"100%"},placeholder:"\u641c\u7d22\u5173\u952e\u8bcd",onSearch:this.onSearch,enterButton:!0})),g.a.createElement(v.a,{noDataText:"\u6682\u65e0\u6570\u636e",visible:!0,selectText:!1,rightMenuOption:[],nodeClick:function(t){var a=t.props.dataRef.projectId;e.setState({curClickNodeId:a,curClickNodeData:t.props.dataRef})},myFetch:this.props.myFetch,upload:this.props.myUpload,btnShow:!1,draggable:!1,fetchConfig:{parmasKey:"parentId",apiName:"getZjTzPermissionListByProject",searchApiName:"",otherParams:E({},n)},keys:E({},a),canExpand:function(){return!1},ref:function(t){t&&(e.tree=t)}})),g.a.createElement("div",{className:S.a.right},r?g.a.createElement(T.a,{wrappedComponentRef:function(t){e.table=t},history:this.props.history,match:this.props.match,fetch:this.props.myFetch,headers:{token:this.props.loginAndLogoutInfo.loginInfo.token},antd:{rowKey:"permissionId",size:"small"},actionBtns:[{name:"add",icon:"plus",type:"primary",label:"\u6388\u6743",drawerTitle:"\u6388\u6743",formBtns:[{name:"cancel",type:"dashed",label:"\u53d6\u6d88"},{name:"submit",type:"primary",label:"\u4fdd\u5b58",fetchConfig:{apiName:"addZjTzPermission",otherParams:{projectId:this.state.curClickNodeData?this.state.curClickNodeData.projectId:"",projectName:this.state.curClickNodeData?this.state.curClickNodeData.projectName:"",projectShortName:this.state.curClickNodeData?this.state.curClickNodeData.projectShortName:"",enginnerId:this.state.curClickNodeData?this.state.curClickNodeData.enginnerId:"",enginnerName:this.state.curClickNodeData?this.state.curClickNodeData.enginnerName:"",projectStateId:this.state.curClickNodeData?this.state.curClickNodeData.projectStateId:"",projectCaseId:this.state.curClickNodeData?this.state.curClickNodeData.projectCaseId:"",projectStateName:this.state.curClickNodeData?this.state.curClickNodeData.projectStateName:"",projectCaseName:this.state.curClickNodeData?this.state.curClickNodeData.projectCaseName:""}}}]},{name:"del",icon:"delete",type:"danger",label:"\u5220\u9664",fetchConfig:{apiName:"batchDeleteUpdateZjTzPermission"}}],fetchConfig:{apiName:"getZjTzPermissionList",otherParams:{projectId:r}},formConfig:[{isInTable:!1,form:{type:"string",label:"permissionId",field:"permissionId",hide:!0}},{table:{dataIndex:"permissionName",key:"permissionName",title:"<center>\u6743\u9650\u540d\u79f0</center>"},form:{label:"\u6743\u9650\u540d\u79f0",required:!0,placeholder:"\u8bf7\u8f93\u5165",type:"string"}},{isInTable:!1,table:{dataIndex:"zjTzPermissionUserList",key:"zjTzPermissionUserList",title:"\u6743\u9650\u5bf9\u8c61"},form:{required:!0,type:"treeSelect",treeSelectOption:{fetchConfig:{apiName:"getSysDepartmentUserAllTree"},search:!0,useCollect:!0,collectApi:"appGetSysFrequentContactsList",collectApiByAdd:"appAddSysFrequentContacts",collectApiByDel:"appRemoveSysFrequentContacts",searchPlaceholder:"\u59d3\u540d\u3001\u8d26\u53f7\u3001\u7535\u8bdd",searchParamsKey:"search",searchOtherParams:{pageSize:999}}}},{isInForm:!1,table:{dataIndex:"modifyUserName",key:"modifyUserName",title:"<center>\u64cd\u4f5c\u8005</center>"}},{isInForm:!1,table:{dataIndex:"modifyTime",key:"modifyTime",title:"<center>\u64cd\u4f5c\u65f6\u95f4</center>",format:"YYYY-MM-DD HH:mm:ss"},form:{label:"\u64cd\u4f5c\u65f6\u95f4",field:"modifyTime",placeholder:"\u8bf7\u8f93\u5165",type:"datetime"}},{isInForm:!1,table:{width:80,showType:"tile",dataIndex:"action",key:"action",fixed:"right",btns:[{name:"edit",render:function(e){return"<a>\u4fee\u6539</a>"},formBtns:[{name:"cancel",type:"dashed",label:"\u53d6\u6d88"},{name:"diySubmit",type:"primary",label:"\u4fdd\u5b58",field:"diySubmit",onClick:function(t){t.btnCallbackFn.setBtnsLoading("add","diySubmit"),t._formData.projectId=e.state.curClickNodeData.projectId,t._formData.projectName=e.state.curClickNodeData.projectName,t._formData.projectShortName=e.state.curClickNodeData.projectShortName,t._formData.enginnerId=e.state.curClickNodeData.enginnerId,t._formData.enginnerName=e.state.curClickNodeData.enginnerName,t._formData.projectStateId=e.state.curClickNodeData.projectStateId,t._formData.projectCaseId=e.state.curClickNodeData.projectCaseId,t._formData.projectStateName=e.state.curClickNodeData.projectStateName,t._formData.projectCaseName=e.state.curClickNodeData.projectCaseName,t.btnCallbackFn.fetch("updateZjTzPermission",t._formData,function(e){e.data;var a=e.success,r=e.message;a?(t.btnCallbackFn.msg.success(r),t.btnCallbackFn.refresh(),t.btnCallbackFn.setBtnsLoading("remove","diySubmit"),t.btnCallbackFn.closeDrawer(!1)):(t.btnCallbackFn.setBtnsLoading("remove","diySubmit"),t.btnCallbackFn.msg.error(r))})}}]}]}}]}):null,r?null:g.a.createElement("div",{className:S.a.alert},"\u70b9\u51fb\u5de6\u4fa7\u8282\u70b9\u5373\u53ef\u67e5\u770b\u8be6\u7ec6\u4fe1\u606f")))}}]),t}(j.Component);t.default=_}}]);