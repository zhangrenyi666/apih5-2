(window.webpackJsonp=window.webpackJsonp||[]).push([[158],{"E/0I":function(e,a,t){"use strict";t.r(a);t("zIPO");var s=t("UpC8"),n=(t("fx2i"),t("cZi0")),o=t("Id3l"),l=t("RNsw"),r=t("OR/T"),i=t("bn5B"),c=t("PnTt"),d=(t("w9C0"),t("XW+2")),p=t("r0ML"),m=t.n(p),f=t("6eYn"),u=t("QMtf"),b=t.n(u),h=t("ID3L"),w=t.n(h),I=d.a.confirm,y={antd:{rowKey:function(e){return e.annualAssessId},size:"small"},drawerConfig:{width:"1000px"},paginationConfig:{position:"bottom"},firstRowIsSearch:!1,isShowRowSelect:!0,formItemLayout:{labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}}}},g=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(r.a)(this,Object(i.a)(a).call(this,e))).state={companyId:e.loginAndLogoutInfo.loginInfo.userInfo.companyList[0].companyId,companyName:e.loginAndLogoutInfo.loginInfo.userInfo.companyList[0].companyName},t}return Object(c.a)(a,e),Object(l.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,a=this.state,t=a.companyName,o=a.companyId,l=this.props.loginAndLogoutInfo.loginInfo.userInfo.curCompany,r=l.projectId;l.projectShortName;return m.a.createElement("div",{className:b.a.root},m.a.createElement(f.a,Object(s.a)({},this.props,{fetch:this.props.myFetch,upload:this.props.myUpload,headers:{token:this.props.loginAndLogoutInfo.loginInfo.token},fetchConfig:{apiName:"getZjTzAnnualAssessList",otherParams:{projectId:r}},wrappedComponentRef:function(a){e.table=a}},y,{formConfig:[{isInTable:!1,form:{field:"annualAssessId",type:"string",hide:!0}},{isInTable:!1,form:{field:"companyId",type:"string",initialValue:o,hide:!0}},{isInSearch:!1,table:{title:"\u8003\u6838\u5e74\u5ea6",dataIndex:"yearDate",width:120,key:"yearDate",onClick:"detail",render:function(e){return e?w()(e).format("YYYY"):""}},form:{type:"year",field:"yearDate",placeholder:"\u8bf7\u8f93\u5165",required:!0,editDisabled:!0,formItemLayout:{labelCol:{xs:{span:21},sm:{span:3}},wrapperCol:{xs:{span:21},sm:{span:21}}}}},{table:{title:"\u6258\u7ba1\u516c\u53f8",dataIndex:"trusteeCompanyName",key:"trusteeCompanyName"},form:{field:"trusteeCompanyName",type:"string",disabled:!0,addDisabled:!0,editDisabled:!0,initialValue:t,required:!0,placeholder:"\u8bf7\u8f93\u5165",spanForm:12,formItemLayoutForm:{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}}}},{table:{title:"\u9879\u76ee\u540d\u79f0",dataIndex:"projectName",key:"projectName"},form:{label:"\u6258\u7ba1\u9879\u76ee",field:"projectId",type:"select",required:!0,editDisabled:!0,optionConfig:{label:"projectName",value:"projectId"},fetchConfig:{apiName:"getZjTzPermissionListByProject",otherParams:{allFlag:0}},placeholder:"\u8bf7\u9009\u62e9",spanForm:12,formItemLayoutForm:{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}}}},{table:{title:"\u8003\u6838\u7ed3\u679c",dataIndex:"result",width:400,tooltip:50,key:"result"},form:{label:"\u8003\u6838\u7ed3\u679c\u7b80\u8ff0",type:"textarea",field:"result",placeholder:"\u8bf7\u8f93\u5165",required:!0,formItemLayout:{labelCol:{xs:{span:21},sm:{span:3}},wrapperCol:{xs:{span:21},sm:{span:21}}}}},{table:{title:"\u72b6\u6001",dataIndex:"releaseName",key:"releaseName",width:100},isInForm:!1},{isInTable:!1,form:{label:"\u9644\u4ef6",field:"zjTzFileList",type:"files",showDownloadIcon:!0,onPreview:"bind:_docFilesByOfficeUrl",fetchConfig:{apiName:window.configs.domain+"upload",otherParams:{name:"\u9879\u76ee\u5e74\u5ea6\u8003\u6838"}}}},{isInTable:!1,form:{field:"registerDate",type:"date",label:"\u767b\u8bb0\u65e5\u671f",required:!0,addDisabled:!0,editDisabled:!0,placeholder:"\u8bf7\u8f93\u5165",spanForm:12,formItemLayoutForm:{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}},initialValue:function(){return new Date}}},{isInTable:!1,form:{field:"registerPerson",type:"string",label:"\u767b\u8bb0\u7528\u6237",required:!0,addDisabled:!0,editDisabled:!0,placeholder:"\u8bf7\u8f93\u5165",spanForm:12,formItemLayoutForm:{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}},initialValue:function(e){return e.loginAndLogoutInfo.loginInfo.userInfo.realName}}}],method:{editClick:function(a){"1"===a.selectedRows[0].releaseId?(a.btnCallbackFn.closeDrawer(),n.b.warn("\u5df2\u4e0a\u62a5\u7684\u4e0d\u80fd\u4fee\u6539!"),e.table.clearSelectedRows()):e.table.clearSelectedRows()},faBuClick:function(a){e.table.clearSelectedRows();var t=a.props.myFetch;if(a.selectedRows.length>0){for(var s=[],o=0;o<a.selectedRows.length;o++)"1"===a.selectedRows[o].releaseId&&s.push(a.selectedRows[o].releaseId);s.length>0?n.b.warn("\u5df2\u4e0a\u62a5\u7684\u6d88\u606f\u4e0d\u80fd\u4e0a\u62a5\uff01"):I({title:"\u786e\u5b9a\u4e0a\u62a5\u4e48?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){t("batchReleaseZjTzAnnualAssess",a.selectedRows).then(function(a){var t=a.success,s=a.message;t?(n.b.success(s),e.table.refresh()):n.b.error(s)})}})}else n.b.warn("\u8bf7\u9009\u62e9\u6570\u636e")},cheHuiClick:function(a){e.table.clearSelectedRows();var t=a.props.myFetch;if(a.selectedRows.length>0){for(var s=[],o=0;o<a.selectedRows.length;o++)"0"!==a.selectedRows[o].releaseId&&"2"!==a.selectedRows[o].releaseId||s.push(a.selectedRows[o].releaseId);s.length>0?n.b.warn("\u672a\u4e0a\u62a5/\u88ab\u9000\u56de\u7684\u6d88\u606f\u4e0d\u80fd\u9000\u56de\uff01"):I({title:"\u786e\u5b9a\u9000\u56de\u4e48?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){t("batchRecallZjTzAnnualAssess",a.selectedRows).then(function(a){var t=a.success,s=a.message;t?(n.b.success(s),e.table.refresh()):n.b.error(s)})}})}else n.b.warn("\u8bf7\u9009\u62e9\u6570\u636e")},filestExport:function(a){e.table.clearSelectedRows();var t=a.props.myFetch;a.selectedRows.length>0?I({title:"\u786e\u5b9a\u5bfc\u51fa\u9644\u4ef6\u4e48?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){t("batchExportZjTzAnnualAssessFile",a.selectedRows).then(function(a){var t=a.success,s=a.message,o=a.data;t?(n.b.success(s),window.location.href=o,e.table.refresh(),e.table.clearSelectedRows()):n.b.error(s)})}}):n.b.warn("\u8bf7\u9009\u62e9\u6570\u636e")},delClick:function(a){var t=a.props.myFetch,s=[];if(a.selectedRows.length>0){for(var o=0;o<a.selectedRows.length;o++)"1"===a.selectedRows[o].releaseId&&s.push(a.selectedRows[o].releaseId);s.length>0?(a.btnCallbackFn.closeDrawer(),n.b.warn("\u5df2\u4e0a\u62a5\u7684\u4e0d\u80fd\u5220\u9664!"),e.table.clearSelectedRows()):I({title:"\u786e\u5b9a\u5220\u9664\u4e48?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){t("batchDeleteUpdateZjTzAnnualAssess",a.selectedRows).then(function(a){var t=a.success,s=a.message;t?(n.b.success(s),e.table.refresh(),e.table.clearSelectedRows()):n.b.error(s)})}})}else n.b.warn("\u8bf7\u9009\u62e9\u6570\u636e!")}},actionBtns:{apiName:"getSysMenuBtn",otherParams:function(e){var a=e.Pprops;return{menuParentId:a.routerInfo.routeData[a.routerInfo.curKey]._value,tableField:"projectInfo"}}}})))}}]),a}(p.Component);a.default=g},QMtf:function(e,a,t){}}]);