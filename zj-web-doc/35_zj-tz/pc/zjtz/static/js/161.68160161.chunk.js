(window.webpackJsonp=window.webpackJsonp||[]).push([[161],{a3c5:function(e,t,a){e.exports={root:"_2KBoiNZH01GVNUG7w1rdnQ",left:"_3VFs4pOt8sVCze98A3HIGd",tooltips:"_3xenv8rLzOePKg5LVdNwR6",hr:"_2JimKSZx1JZMc20USqGPgh",right:"_3aUiOhpmumh--AhZ3HVAHE",alert:"_3JfthfVQaj6qXLcX_Z1Vew"}},wVT1:function(e,t,a){"use strict";a.r(t);var n=a("fbSu"),o=a.n(n),l=a("5T12"),i=a.n(l),r=a("qHWA"),s=a.n(r),d=a("rx6U"),p=a.n(d),c=a("4tJN"),m=a.n(c),f=a("Qsbb"),h=a.n(f),u=(a("9U97"),a("x/6R"),a("MRnW"),a("IdsT"),a("l9AF"),a("orcL"),a("w9C0"),a("XW+2")),b=(a("fx2i"),a("cZi0")),y=(a("3fBH"),a("g2mn")),g=a("UpC8"),w=a("C9HG"),C=a("eRGJ"),T=a.n(C),S=a("YqOB"),I=a("Id3l"),v=a("RNsw"),B=a("OR/T"),P=a("bn5B"),x=a("PnTt"),k=a("r0ML"),R=a.n(k),j=a("a3c5"),N=a.n(j),A=a("6eYn"),O=a("vcLm"),L=a("mrSZ");function E(e,t){var a=h()(e);if(m.a){var n=m()(e);t&&(n=n.filter(function(t){return p()(e,t).enumerable})),a.push.apply(a,n)}return a}function F(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?E(Object(a),!0).forEach(function(t){Object(S.a)(e,t,a[t])}):s.a?i()(e,s()(a)):E(Object(a)).forEach(function(t){o()(e,t,p()(a,t))})}return e}var Z={antd:{rowKey:"pppTermBaseId",size:"small"},formItemLayout:{labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}}},paginationConfig:{position:"bottom"},drawerConfig:{width:"800px"},firstRowIsSearch:!1,isShowRowSelect:!1},K=function(e){function t(){var e,a;Object(I.a)(this,t);for(var n=arguments.length,o=new Array(n),l=0;l<n;l++)o[l]=arguments[l];return(a=Object(B.a)(this,(e=Object(P.a)(t)).call.apply(e,[this].concat(o)))).state={loading:!1,ClickPppTermBaseId:null,inShow:"1",outShow:"1",visibleSend:!1,loadingSend:!1,tolCount:0,treeNodeKeys:{label:"analysisKey",value:"pppTermBaseId",children:"getZjTzPppTermBaseList"},treeShow:!0},a.tableByRoot={antd:{rowKey:"codeId",locale:{emptyText:""},style:{display:"none"}},formConfig:[{isInTable:!1,form:{type:"string",label:"id",field:"codeId",hide:!0,placeholder:"\u8bf7\u8f93\u5165"}},{isInTable:!1,form:{type:"string",initialValue:"0",field:"interfaceFlag",hide:!0,placeholder:"\u8bf7\u8f93\u5165"}},{isInTable:!1,form:{type:"string",label:"codePid",field:"codePid",hide:!0,placeholder:"\u8bf7\u8f93\u5165"}},{isInTable:!1,form:{type:"string",label:"pidAll",field:"pidAll",hide:!0,placeholder:"\u8bf7\u8f93\u5165"}},{isInTable:!1,form:{type:"string",label:"pidNameAll",field:"pidNameAll",hide:!0,placeholder:"\u8bf7\u8f93\u5165"}},{isInTable:!1,form:{label:"\u5206\u6790\u91cd\u70b9",type:"string",required:!0,field:"analysisKey",formItemLayoutForm:{labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}}}}}]},a.tableByInRoot={antd:{rowKey:"codeId",locale:{emptyText:""},style:{display:"none"}},formConfig:[{isInTable:!1,form:{field:"pppTermBaseId",hide:!0,label:"\u4e3b\u952eid",type:"string"}},{isInTable:!1,form:{type:"string",initialValue:"1",field:"interfaceFlag",hide:!0,placeholder:"\u8bf7\u8f93\u5165"}},{isInTable:!1,form:{label:"\u91cd\u70b9\u6761\u6b3e",required:!0,type:"string",field:"keyTerm",formItemLayoutForm:{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}}}}},{isInTable:!1,form:{label:"\u91cd\u70b9\u5206\u6790\u5185\u5bb9",type:"textarea",field:"keyAnalysisContent",formItemLayoutForm:{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}}}}}]},a.handleCancelSend=function(){a.setState({visibleSend:!1,loadingSend:!1})},a}return Object(x.a)(t,e),Object(v.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.visibleSend,n=t.loadingSend,o=t.ClickPppTermBaseId,l=t.outShow,i=t.treeNodeKeys,r=t.inShow,s=t.loading,d=t.treeShow,p=this.tableByRoot,c=this.tableByInRoot,m=this.table,f=this.props.loginAndLogoutInfo.loginInfo.userInfo.ext1;return R.a.createElement("div",{className:N.a.root},R.a.createElement("div",{className:N.a.left,ref:function(t){t&&(e.leftDom=t)}},R.a.createElement("div",{className:N.a.hr,ref:function(t){if(t){var a=function(e){var t=document.getElementsByClassName("ant-layout-content")[0].offsetLeft;n.leftDom.style["flex-basis"]=e.pageX-t+"px"},n=e;t.addEventListener("mousedown",function(t){e.onDragStartPos=t.pageX,document.addEventListener("mousemove",a,!1)},!1),document.addEventListener("mouseup",function(e){document.removeEventListener("mousemove",a,!1)},!1)}}}),d?R.a.createElement(L.a,{visible:!0,modalType:"common",nodeClick:function(t,a){"0"===t.props.dataRef.codePid&&e.setState({ClickPppTermBaseId:t.props.dataRef.pppTermBaseId,outShow:t.props.dataRef.codePid,inShow:t.props.dataRef.codePid}),m&&m.clearSelectedRows()},myFetch:this.props.myFetch,selectModal:"0",btnShow:!1,selectText:!1,ref:function(t){return e.tree=t},nodeRender:function(e){return R.a.createElement("span",null,e.analysisKey)},rightMenuOption:function(t){return f&&"1"===f?"0"===t.codePid?[{label:"\u65b0\u589e\u91cd\u70b9\u6761\u6b3e",name:"diy",cb:function(t){if(e.tableByInRootObj){var a=t.props.dataRef,n=t.props.expanded,o={interfaceFlag:"1",codePid:a.pppTermBaseId,analysisKey:a.analysisKey};e.tableByInRootObj.action({drawerTitle:"\u65b0\u589e",name:"add",formBtns:[{name:"cancel",type:"dashed",label:"\u53d6\u6d88"},{name:"submit",type:"primary",label:"\u4fdd\u5b58",fetchConfig:{apiName:"addZjTzPppTermBase",otherParams:F({},o)},onClick:function(a){var o=e.tree.state.data||[],l=e.state.treeNodeKeys,i=l.value,r=l.children;if(t.props.expanded||t.onExpand(),n){var s=function e(t){for(var n=0;n<t.length;n++){var o=t[n];o[i]===a.data.codePid&&(t[n][r]||(t[n][r]=[]),t[n][r].unshift(a.data)),o[r]&&T()(o[r])&&o[r].length&&e(o[r])}return t}(Object(w.a)(o));e.tree.setTreeData(s)}e.setState({treeShow:!1},function(){e.setState({treeShow:!0})}),e.table&&e.table.refresh()}}]})}}},{label:"\u5220\u9664\u5206\u6790\u91cd\u70b9",name:"del"}]:[{label:"\u7f16\u8f91\u91cd\u70b9\u6761\u6b3e",name:"editDiy",cb:function(t){e.tableByInRootObj.action({drawerTitle:"\u7f16\u8f91\u8bc4\u4ef7\u6307\u6807",name:"edit",formBtns:[{name:"cancel",type:"dashed",label:"\u53d6\u6d88"},{name:"submit",type:"primary",label:"\u4fdd\u5b58",fetchConfig:{apiName:"updateZjTzPppTermBase"},onClick:function(t){var a=e.tree.state.data||[],n=e.state.treeNodeKeys,o=n.value,l=n.children,i=function e(a){for(var n=0;n<a.length;n++){var i=a[n];i[o]===t.data[o]&&(a[n]=F({},a[n],{},t.data)),i[l]&&T()(i[l])&&i[l].length&&e(i[l])}return a}(Object(w.a)(a));e.tree.setTreeData(i),e.setState({treeShow:!1},function(){e.setState({treeShow:!0})}),e.table&&e.table.refresh()}}]},t.props.dataRef)}},{label:"\u5220\u9664\u91cd\u70b9\u6761\u6b3e",name:"del"}]:[]},rightMenuOptionByContainer:f&&"1"===f?[{label:"\u65b0\u589e\u5206\u6790\u91cd\u70b9",name:"diy",cb:function(){e.tableByRootObj&&e.tableByRootObj.action({drawerTitle:"\u65b0\u589e",name:"add",formBtns:[{name:"cancel",type:"dashed",label:"\u53d6\u6d88"},{name:"submit",type:"primary",label:"\u4fdd\u5b58",fetchConfig:{apiName:"addZjTzPppTermBase",otherParams:{codePid:"0"}},onClick:function(t){var a=e.tree.getTreeData();a.push(t.data),e.tree.setTreeData(a)}}]})}},{label:"\u5bfc\u5165",name:"diyLock",cb:function(t){e.setState({visibleSend:!0})}}]:[],fetchConfig:{parmasKey:"codePid",apiName:"getZjTzPppTermBaseList",searchApiName:"",params:{codePid:"0"},success:function(t){var a=0;if(t){for(var n=0;n<t.length;n++)t[n].scoreSubtotal&&(a+=t[n].scoreSubtotal);a>0&&e.setState({tolCount:a})}},nodeAddApiName:"addZjTzPppTermBase",nodeAddParamsFormat:function(e,t){return F({},e,{levelName:"\u672a\u547d\u540d",codePid:t.props.dataRef.codeId,pidAll:t.props.dataRef.pidAll,pidNameAll:t.props.dataRef.pidNameAll})},nodeAddCb:function(){e.table&&e.table.refresh()},nodeEditApiName:"updateZjTzPppTermBase",nodeEditCb:function(){e.table&&e.table.refresh()},nodeDelApiName:"batchDeleteUpdateZjTzPppTermBase",nodeDelParamsFormat:function(e,t){return[e]},nodeDelCb:function(t){e.setState({treeShow:!1},function(){e.setState({treeShow:!0})}),e.table&&e.table.refresh()}},keys:F({},i),draggable:!1}):null),R.a.createElement("div",{className:N.a.right},R.a.createElement(y.a,{spinning:s},"1"===r?null:R.a.createElement(A.a,Object(g.a)({},this.props,{firstRowIsSearch:!0,fetch:this.props.myFetch,upload:this.props.myUpload,wrappedComponentRef:function(t){e.table=t},headers:{token:this.props.loginAndLogoutInfo.loginInfo.token},fetchConfig:{apiName:"getZjTzPppTermBaseList",otherParams:{codePid:o,interfaceFlag:"1"}}},Z,{formConfig:[{isInTable:!1,form:{field:"pppTermBaseId",hide:!0,label:"\u4e3b\u952eid",type:"string"}},{isInTable:!1,form:{field:"thousandCheckId",hide:!0,initialValue:o,label:"\u5916\u5c42\u7684id",type:"string"}},{table:{title:"\u91cd\u70b9\u6761\u6b3e",dataIndex:"keyTerm",onClick:"detail",key:"keyTerm"},form:{type:"string",required:!0,field:"keyTerm",formItemLayoutForm:{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}}}}},{table:{title:"\u91cd\u70b9\u5206\u6790\u5185\u5bb9",dataIndex:"keyAnalysisContent",key:"keyAnalysisContent"},form:{label:"\u91cd\u70b9\u5206\u6790\u5185\u5bb9",type:"textarea",field:"keyAnalysisContent",formItemLayoutForm:{labelCol:{xs:{span:24},sm:{span:5}},wrapperCol:{xs:{span:24},sm:{span:19}}}}}],actionBtns:[]})),R.a.createElement(A.a,Object(g.a)({wrappedComponentRef:function(t){e.tableByRootObj=t},fetch:this.props.myFetch,headers:{token:this.props.loginAndLogoutInfo.loginInfo.token}},p)),R.a.createElement(A.a,Object(g.a)({wrappedComponentRef:function(t){e.tableByInRootObj=t},fetch:this.props.myFetch,headers:{token:this.props.loginAndLogoutInfo.loginInfo.token}},c)),"1"===l&&"1"===r?R.a.createElement("div",{className:N.a.alert},"\u70b9\u51fb\u5de6\u4fa7\u8282\u70b9\u5373\u53ef\u67e5\u770bPPP\u5408\u540c\u98ce\u9669\u6761\u6b3e\u4fe1\u606f"):null)),R.a.createElement(u.a,{width:"500px",style:{top:"0"},title:"\u5bfc\u5165",visible:a,footer:null,onCancel:this.handleCancelSend,bodyStyle:{width:"500px"},centered:!0,destroyOnClose:this.handleCancelSend,wrapClassName:"modals"},R.a.createElement(y.a,{spinning:n},R.a.createElement(O.a,Object(g.a)({},this.props,{match:this.props.match,fetch:this.props.myFetch,upload:this.props.myUpload,headers:{token:this.props.loginAndLogoutInfo.loginInfo.token},formConfig:[{label:"\u9644\u4ef6",field:"fileList",required:!0,showDownloadIcon:!0,onPreview:"bind:_docFilesByOfficeUrl",type:"files",fetchConfig:{apiName:window.configs.domain+"upload",otherParams:{name:"\u98ce\u9669\u53ca\u6761\u6b3e\u8bbe\u7f6e"}}}],btns:[{name:"cancel",type:"dashed",label:"\u53d6\u6d88",isValidate:!1,onClick:function(){e.setState({visibleSend:!1,loadingSend:!1})}},{name:"submit",type:"primary",label:"\u4fdd\u5b58",onClick:function(t){e.setState({loadingSend:!0}),e.props.myFetch("batchImportZjTzPppTermBase",t.values).then(function(t){var a=t.success,n=t.message;a?(b.b.success(n),e.setState({visibleSend:!1,loadingSend:!1},function(){e.setState({treeShow:!1},function(){e.setState({treeShow:!0})})})):b.b.error(n)})}}],formItemLayout:{labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:20},sm:{span:20}}}})))))}}]),t}(k.Component);t.default=K}}]);