(window.webpackJsonp=window.webpackJsonp||[]).push([[171],{XIhs:function(e,t,a){"use strict";a.r(t);a("zIPO");var o=a("UpC8"),n=(a("fx2i"),a("cZi0")),s=a("Id3l"),l=a("RNsw"),r=a("OR/T"),i=a("bn5B"),c=a("PnTt"),d=(a("w9C0"),a("XW+2")),p=a("r0ML"),f=a.n(p),m=a("6eYn"),u=(a("vcLm"),a("ID3L")),h=a.n(u),b=a("fJ3H"),w=a.n(b),I=d.a.confirm,g={antd:{rowKey:function(e){return e.yearPointId},size:"small"},drawerConfig:{width:"1000px"},paginationConfig:{position:"bottom"},firstRowIsSearch:!1,isShowRowSelect:!0,formItemLayout:{labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}}}},y=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(r.a)(this,Object(i.a)(t).call(this,e))).state={companyId:e.loginAndLogoutInfo.loginInfo.userInfo.companyList[0].companyId,companyName:e.loginAndLogoutInfo.loginInfo.userInfo.companyList[0].companyName,departmentList:[{label:e.loginAndLogoutInfo.loginInfo.userInfo.departmentList[0].departmentName,value:e.loginAndLogoutInfo.loginInfo.userInfo.departmentList[0].departmentId}]},a}return Object(c.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state.companyId,a=this.props.loginAndLogoutInfo.loginInfo.userInfo.realName,s=this.props.loginAndLogoutInfo.loginInfo.userInfo.curCompany.projectId,l=this.props.loginAndLogoutInfo.loginInfo.userInfo.ext1;return f.a.createElement("div",{className:w.a.root},f.a.createElement(m.a,Object(o.a)({},this.props,{fetch:this.props.myFetch,upload:this.props.myUpload,headers:{token:this.props.loginAndLogoutInfo.loginInfo.token},wrappedComponentRef:function(t){e.table=t},fetchConfig:{apiName:"getZjTzSpecialYearPointList",otherParams:{companyId:s}}},g,{desc:"1"===l?"\u53d1\u5e03\uff1a\u4f7f\u6570\u636e\u5168\u5e73\u53f0\u7528\u6237\u53ef\u89c1\uff1b\u5e7f\u800c\u544a\u4e4b\uff1a\u5c06\u5df2\u53d1\u5e03\u7684\u6570\u636e\u5c55\u793a\u81f3\u9996\u9875":null,formConfig:[{isInTable:!1,form:{field:"yearPointId",type:"string",hide:!0}},{isInTable:!1,form:{field:"companyId",type:"string",hide:!0,initialValue:t}},{table:{title:"\u5e74\u5ea6",width:100,dataIndex:"yearDate",onClick:"detail",key:"yearDate",render:function(e){return e?h()(e).format("YYYY"):""}},form:{type:"year",field:"yearDate",placeholder:"\u8bf7\u8f93\u5165",required:!0,editDisabled:!0,formItemLayoutForm:{labelCol:{xs:{span:6},sm:{span:3}},wrapperCol:{xs:{span:18},sm:{span:21}}}}},{table:{title:"\u6240\u5c5e\u673a\u6784",dataIndex:"companyName",key:"companyName"},form:{field:"projectList",required:!0,addDisabled:!0,editDisabled:!0,initialValue:this.state.departmentList,type:"treeSelect",treeSelectOption:{selectType:"1",maxNumber:1,fetchConfig:{apiName:"getSysDepartmentUserAllTree"},useCollect:!0,collectApi:"appGetSysFrequentContactsList",collectApiByAdd:"appAddSysFrequentContacts",collectApiByDel:"appRemoveSysFrequentContacts",search:!0,searchPlaceholder:"\u59d3\u540d\u3001\u8d26\u53f7\u3001\u7535\u8bdd",searchParamsKey:"search",searchOtherParams:{pageSize:999}}}},{table:{title:"\u767b\u8bb0\u65e5\u671f",dataIndex:"registerDate",format:"YYYY-MM-DD",key:"registerDate"},isInForm:!1},{table:{title:"\u767b\u8bb0\u7528\u6237",dataIndex:"registerPerson",key:"registerPerson"},isInForm:!1},{table:{title:"\u5185\u5bb9\u7b80\u4ecb",width:300,tooltip:80,dataIndex:"content",key:"content"},form:{type:"textarea",label:"\u5185\u5bb9\u7b80\u4ecb",field:"content"}},{isInTable:!1,form:{label:"\u767b\u8bb0\u65e5\u671f",type:"date",field:"registerDate",initialValue:new Date,placeholder:"\u8bf7\u9009\u62e9",addDisabled:!0,editDisabled:!0,spanForm:12,formItemLayoutForm:{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}}}},{isInTable:!1,form:{field:"registerPerson",type:"string",label:"\u767b\u8bb0\u4eba",required:!0,addDisabled:!0,editDisabled:!0,placeholder:"\u8bf7\u8f93\u5165",spanForm:12,formItemLayoutForm:{labelCol:{xs:{span:24},sm:{span:6}},wrapperCol:{xs:{span:24},sm:{span:18}}},initialValue:a}},{table:{title:"\u72b6\u6001",width:100,dataIndex:"releaseName",key:"releaseName"},isInForm:!1,form:{type:"select",field:"releaseId",hide:!0,optionData:[{label:"\u672a\u53d1\u5e03",value:"0"},{label:"\u53d1\u5e03",value:"1"}]}},{table:{title:"\u662f\u5426\u5728\u9996\u9875\u5e7f\u800c\u544a\u4e4b",dataIndex:"homeShow",filter:!0,width:160,key:"homeShow",render:function(e){return"0"===e?"\u5426":"\u662f"}},isInForm:!1,form:{type:"select",field:"homeShow",hide:!0,optionData:[{label:"\u5426",value:"0"},{label:"\u662f",value:"1"}]}},{isInTable:!1,form:{label:"\u9644\u4ef6",field:"zjTzFileList",type:"files",showDownloadIcon:!0,onPreview:"bind:_docFilesByOfficeUrl",fetchConfig:{apiName:window.configs.domain+"upload",otherParams:{name:"\u4e13\u9879\u6d3b\u52a8-\u5e74\u5e95\u603b\u7eb2\u8981\u70b9"}}}}],method:{editClick:function(t){"1"===t.selectedRows[0].releaseId?(t.btnCallbackFn.closeDrawer(),n.b.warn("\u5df2\u53d1\u5e03\u7684\u4e0d\u80fd\u4fee\u6539!"),e.table.clearSelectedRows()):e.table.clearSelectedRows()},faBuClick:function(t){e.table.clearSelectedRows();var a=t.props.myFetch;if(t.selectedRows.length>0){for(var o=[],s=0;s<t.selectedRows.length;s++)"1"===t.selectedRows[s].releaseId&&o.push(t.selectedRows[s].releaseId);o.length>0?n.b.warn("\u5df2\u53d1\u5e03\u7684\u6d88\u606f\u4e0d\u80fd\u53d1\u5e03\uff01"):I({title:"\u786e\u5b9a\u53d1\u5e03\u4e48?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){a("batchReleaseZjTzSpecialYearPoint",t.selectedRows).then(function(t){var a=t.success,o=t.message;a?(n.b.success(o),e.table.refresh()):n.b.error(o)})}})}else n.b.warn("\u8bf7\u9009\u62e9\u6570\u636e")},cheHuiClick:function(t){e.table.clearSelectedRows();var a=t.props.myFetch;if(t.selectedRows.length>0){for(var o=[],s=0;s<t.selectedRows.length;s++)"0"===t.selectedRows[s].releaseId&&o.push(t.selectedRows[s].releaseId);o.length>0?n.b.warn("\u672a\u53d1\u5e03\u7684\u6d88\u606f\u4e0d\u80fd\u64a4\u56de\uff01"):I({title:"\u786e\u5b9a\u64a4\u56de\u4e48?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){a("batchRecallZjTzSpecialYearPoint",t.selectedRows).then(function(t){var a=t.success,o=t.message;a?(n.b.success(o),e.table.refresh()):n.b.error(o)})}})}else n.b.warn("\u8bf7\u9009\u62e9\u6570\u636e")},guangErGaoZhi:function(t){e.table.clearSelectedRows(),t.selectedRows.length>0?1===t.selectedRows.length?"1"===t.selectedRows[0].releaseId?I({title:"\u786e\u5b9a\u5e7f\u800c\u544a\u4e4b\u5230\u9996\u9875\u4e48\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){e.props.myFetch("toHomeShowZjTzSpecialYearPoint",t.selectedRows[0]).then(function(t){var a=t.success,o=t.message;t.data;a?(n.b.success(o),e.table.refresh()):n.b.error(o)})}}):n.b.warn("\u672a\u53d1\u5e03\u7684\u6d88\u606f\u4e0d\u80fd\u5e7f\u800c\u544a\u4e4b\uff01"):n.b.warn("\u8bf7\u9009\u62e9\u4e00\u6761\u6570\u636e"):n.b.warn("\u8bf7\u9009\u62e9\u6570\u636e")},filestExport:function(t){e.table.clearSelectedRows();var a=t.props.myFetch;t.selectedRows.length>0?I({title:"\u786e\u5b9a\u5bfc\u51fa\u9644\u4ef6\u4e48?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){a("batchExportZjTzSpecialYearPointFile",t.selectedRows).then(function(t){var a=t.success,o=t.message,s=t.data;a?(n.b.success(o),window.location.href=s,e.table.refresh(),e.table.clearSelectedRows()):n.b.error(o)})}}):n.b.warn("\u8bf7\u9009\u62e9\u6570\u636e")},delClick:function(t){var a=t.props.myFetch,o=[];if(t.selectedRows.length>0){for(var s=0;s<t.selectedRows.length;s++)"1"===t.selectedRows[s].releaseId&&o.push(t.selectedRows[s].releaseId);o.length>0?(t.btnCallbackFn.closeDrawer(),n.b.warn("\u5df2\u53d1\u5e03\u7684\u4e0d\u80fd\u5220\u9664!"),e.table.clearSelectedRows()):I({title:"\u786e\u5b9a\u5220\u9664\u4e48?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){a("batchDeleteUpdateZjTzSpecialYearPoint",t.selectedRows).then(function(t){var a=t.success,o=t.message;a?(n.b.success(o),e.table.refresh(),e.table.clearSelectedRows()):n.b.error(o)})}})}else n.b.warn("\u8bf7\u9009\u62e9\u6570\u636e!")}},actionBtns:{apiName:"getSysMenuBtn",otherParams:function(e){var t=e.Pprops;return{menuParentId:t.routerInfo.routeData[t.routerInfo.curKey]._value,tableField:"projectInfo"}}}})))}}]),t}(p.Component);t.default=y},fJ3H:function(e,t,a){}}]);