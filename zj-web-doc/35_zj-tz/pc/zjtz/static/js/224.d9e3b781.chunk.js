(window.webpackJsonp=window.webpackJsonp||[]).push([[224],{WzPy:function(e,a,t){"use strict";t.r(a);t("9U97"),t("zIPO"),t("fx2i");var n=t("cZi0"),l=t("UpC8"),o=t("Id3l"),r=t("RNsw"),s=t("OR/T"),i=t("bn5B"),c=t("PnTt"),d=(t("w9C0"),t("XW+2")),p=t("r0ML"),f=t.n(p),u=t("6eYn"),m=t("U8v4"),b=t("bsUV"),w=t.n(b),I=t("/lTg"),h=d.a.confirm,C={antd:{rowKey:function(e){return e.lifeCycleId},size:"small"},drawerConfig:{width:"1000px"},paginationConfig:{position:"bottom"},firstRowIsSearch:!1,isShowRowSelect:!0,formItemLayout:{labelCol:{xs:{span:24},sm:{span:3}},wrapperCol:{xs:{span:24},sm:{span:21}}}},y=function(e){function a(e){var t;return Object(o.a)(this,a),(t=Object(s.a)(this,Object(i.a)(a).call(this,e))).state={projectId:e.loginAndLogoutInfo.loginInfo.userInfo.curCompany.projectId},t}return Object(c.a)(a,e),Object(r.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,a=this.state.projectId;return f.a.createElement("div",{className:w.a.root},f.a.createElement(u.a,Object(l.a)({},this.props,{fetch:this.props.myFetch,upload:this.props.myUpload,headers:{token:this.props.loginAndLogoutInfo.loginInfo.token},wrappedComponentRef:function(a){e.table=a}},C,{fetchConfig:{apiName:"getZjTzLifeCycleList",otherParams:{projectId:a}},formConfig:[{isInTable:!1,form:{field:"lifeCycleId",type:"string",hide:!0}},{isInSearch:!1,table:{title:"\u9879\u76ee\u540d\u79f0",dataIndex:"projectName",key:"projectName",fixed:"left",width:300,tooltip:23,onClick:"detail",filter:!0},form:{field:"projectId",type:"select",editDisabled:!0,addDisabled:!0,showSearch:!0,initialValue:a,required:!0,optionConfig:{label:"projectName",value:"projectId"},fetchConfig:{apiName:"getZjTzProManageList"},placeholder:"\u8bf7\u8f93\u5165",formItemLayoutForm:{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}}}},{table:{title:"\u72b6\u6001",width:160,dataIndex:"statusId",key:"statusId",type:"select",filter:!0},isInForm:!1,form:{type:"select",field:"statusId",optionData:[{label:"\u672a\u4e0a\u62a5",value:"0"},{label:"\u5df2\u4e0a\u62a5",value:"1"},{label:"\u5df2\u9000\u56de",value:"3"},{label:"\u5df2\u901a\u8fc7",value:"2"},{label:"\u8bc4\u5ba1\u4e2d",value:"4"}]}},{isInTable:!1,form:{label:"\u5907\u6ce8",field:"remark",type:"textarea",formItemLayoutForm:{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}}}},{table:{title:"\u767b\u8bb0\u65e5\u671f",dataIndex:"registerDate",format:"YYYY-MM-DD",key:"registerDate",width:100},isInForm:!1},{isInTable:!1,form:{label:"\u5168\u751f\u547d\u5468\u671f\u7b56\u5212\u9644\u4ef6",field:"zjTzFileList",showDownloadIcon:!0,onPreview:"bind:_docFilesByOfficeUrl",type:"files",fetchConfig:{apiName:window.configs.domain+"upload",otherParams:{name:"\u5168\u751f\u547d\u5468\u671f\u7b56\u5212"}},formItemLayoutForm:{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}}}},{isInTable:!1,form:{field:"registerDate",type:"date",label:"\u767b\u8bb0\u65e5\u671f",required:!0,addDisabled:!0,editDisabled:!0,placeholder:"\u8bf7\u8f93\u5165",spanForm:12,formItemLayoutForm:{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},initialValue:function(){return new Date}}},{isInTable:!1,form:{field:"registerPerson",type:"string",label:"\u767b\u8bb0\u7528\u6237",required:!0,addDisabled:!0,editDisabled:!0,placeholder:"\u8bf7\u8f93\u5165",spanForm:12,formItemLayoutForm:{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},initialValue:function(e){return e.loginAndLogoutInfo.loginInfo.userInfo.realName}}},{isInForm:!1,table:{title:"\u8bc4\u5ba1\u610f\u89c1",dataIndex:"action",key:"action",align:"center",noHaveSearchInput:!0,showType:"tile",width:120,btns:[{name:"PolicyDetail",render:function(e){return"<a>\u8bc4\u5ba1\u8be6\u60c5</a>"},onClick:function(e){var a=e.props.myPublic.appInfo.mainModule,t=e.rowData.lifeCycleId;e.props.dispatch(Object(m.push)("".concat(a,"LifeCyclePlanningDetail/").concat(t,"/","1")))}}]}},{isInForm:!1,table:{title:"\u7b56\u5212\u53d8\u66f4\u67e5\u770b",dataIndex:"action",key:"action",align:"center",noHaveSearchInput:!0,showType:"tile",width:120,btns:[{name:"PolicyDetail",render:function(e){return"1"===e.rowData.showFlag?"<a>\u6709\u53d8\u66f4</a>":""},onClick:function(e){var a=e.props.myPublic.appInfo.mainModule,t=e.rowData,n=t.lifeCycleId;"1"===t.showFlag&&e.props.dispatch(Object(m.push)("".concat(a,"LifeCyclePlanningDetail/").concat(n,"/","0")))}}]}}],componentsKey:{FlowByLifeCyc:function(a){e.table.clearSelectedRows();var t=a.selectedRows;return!t||!t.length||t.length>1?(a.btnCallbackFn.closeDrawer(),a.btnCallbackFn.msg.error("\u8bf7\u9009\u62e9\u4e00\u6761\u6570\u636e\uff01"),f.a.createElement("div",null)):""!=a.selectedRows[0].workId?(a.btnCallbackFn.closeDrawer(),a.btnCallbackFn.msg.error("\u5df2\u53d1\u8d77\u5ba1\u6279\u7684\u4e0d\u53ef\u518d\u53d1\u8d77\uff01"),f.a.createElement("div",null)):f.a.createElement(I.a,Object(l.a)({},a,{flowData:t[0]}))}},method:{addClick:function(e){"all"===a&&(e.btnCallbackFn.closeDrawer(),e.btnCallbackFn.clearSelectedRows(),n.b.warn("\u8bf7\u9009\u62e9\u53f3\u4e0a\u89d2\u9879\u76ee\uff01"))},editClick:function(a){e.table.clearSelectedRows(),"1"===a.selectedRows[0].statusId?(n.b.warn("\u5ba1\u6838\u4e2d\u7684\u6570\u636e\u4e0d\u80fd\u4fee\u6539\uff01"),a.btnCallbackFn.closeDrawer()):"2"===a.selectedRows[0].statusId&&(n.b.warn("\u5ba1\u6838\u7ed3\u675f\u7684\u6570\u636e\u4e0d\u80fd\u4fee\u6539\uff01"),a.btnCallbackFn.closeDrawer())},delClick:function(a){var t=a.props.myFetch,l=[];if(a.selectedRows.length>0){for(var o=0;o<a.selectedRows.length;o++)"1"!==a.selectedRows[o].statusId&&"2"!==a.selectedRows[o].statusId||l.push(a.selectedRows[o].statusId);l.length>0?(a.btnCallbackFn.closeDrawer(),n.b.warn("\u8bf7\u9009\u62e9\u672a\u5ba1\u6838\u7684\u6570\u636e!"),e.table.clearSelectedRows()):h({title:"\u786e\u5b9a\u5220\u9664\u4e48?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){t("batchDeleteUpdateZjTzLifeCycle",a.selectedRows).then(function(a){var t=a.success,l=a.message;t?(n.b.success(l),e.table.refresh(),e.table.clearSelectedRows()):n.b.error(l)})}})}else n.b.warn("\u8bf7\u9009\u62e9\u6570\u636e!")}},actionBtns:{apiName:"getSysMenuBtn",otherParams:function(e){var a=e.Pprops;return{menuParentId:a.routerInfo.routeData[a.routerInfo.curKey]._value,tableField:"projectInfo"}}}})))}}]),a}(p.Component);a.default=y}}]);