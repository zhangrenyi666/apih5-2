(window.webpackJsonp=window.webpackJsonp||[]).push([[212],{GdCQ:function(e,t,a){"use strict";a.r(t);a("9U97"),a("zIPO"),a("8Qi2"),a("IdsT"),a("S26F"),a("pBsb");var n=a("UpC8"),o=(a("fx2i"),a("cZi0")),i=a("Id3l"),l=a("RNsw"),r=a("OR/T"),s=a("bn5B"),d=a("PnTt"),p=a("r0ML"),m=a.n(p),c=a("6eYn"),f=a("U8v4"),u=a("OYeP"),I=a.n(u),b={antd:{rowKey:function(e){return e.designAdvistoryUnitId},size:"small",scroll:{y:.6*document.documentElement.clientHeight}},drawerConfig:{width:"1100px"},paginationConfig:{position:"bottom"},firstRowIsSearch:!1,isShowRowSelect:!0},g=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(r.a)(this,Object(s.a)(t).call(this,e))).state={proNameId:e.loginAndLogoutInfo.loginInfo.userInfo.curCompany?e.loginAndLogoutInfo.loginInfo.userInfo.curCompany.projectId:"",proNameVal:e.loginAndLogoutInfo.loginInfo.userInfo.curCompany?e.loginAndLogoutInfo.loginInfo.userInfo.curCompany.projectName:"",realName:e.loginAndLogoutInfo.loginInfo.userInfo.realName},a}return Object(d.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this,t=this.state,a=t.realName,i=t.proNameId,l=t.proNameVal;return console.log(l),m.a.createElement("div",{className:I.a.root},m.a.createElement(c.a,Object(n.a)({},this.props,{fetch:this.props.myFetch,upload:this.props.myUpload,headers:{token:this.props.loginAndLogoutInfo.loginInfo.token},wrappedComponentRef:function(t){e.table=t},fetchConfig:{apiName:"getZjTzDesignAdvistoryUnitList",otherParams:{typeId:"1",projectId:this.props.loginAndLogoutInfo.loginInfo.userInfo.curCompany.projectId}}},b,{formConfig:[{isInTable:!1,form:{field:"designAdvistoryUnitId",type:"string",hide:!0}},{isInTable:!1,form:{field:"projectName",hide:!0,type:"string",placeholder:"\u8bf7\u8f93\u5165",initialValue:l}},{table:{title:"\u9879\u76ee\u540d\u79f0",dataIndex:"projectId",key:"projectId",fixed:"left",type:"select",filter:!0},form:{field:"projectId",type:"select",showSearch:!0,initialValue:i,required:!0,addDisabled:!0,disabled:!0,editDisabled:!0,optionConfig:{label:"projectName",value:"projectId"},fetchConfig:{apiName:"getZjTzProManageList"},placeholder:"\u8bf7\u8f93\u5165",formItemLayoutForm:{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}}}},{table:{title:"\u5b50\u9879\u76ee\u540d\u79f0",filter:!0,dataIndex:"subprojectInfoId",key:"subprojectInfoId",type:"select"},form:{type:"select",showSearch:!0,label:"\u5b50\u9879\u76ee\u540d\u79f0",field:"subprojectInfoId",placeholder:"\u8bf7\u8f93\u5165",optionConfig:{label:"subprojectName",value:"subprojectInfoId"},fetchConfig:{apiName:"getZjTzProSubprojectInfoList",otherParams:{projectId:i}}}},{isInTable:!1,form:{label:"\u8bbe\u8ba1\u9636\u6bb5",field:"designStageId",type:"select",placeholder:"\u8bf7\u9009\u62e9",required:!0,optionConfig:{label:"itemName",value:"itemId"},fetchConfig:{apiName:"getBaseCodeSelect",otherParams:{itemId:"sheJiJieDuan"}},spanForm:12,formItemLayout:{labelCol:{xs:{span:20},sm:{span:8}},wrapperCol:{xs:{span:20},sm:{span:16}}}}},{isInTable:!1,form:{label:"\u9009\u5b9a\u65b9\u5f0f",field:"selectModeId",type:"select",placeholder:"\u8bf7\u9009\u62e9",required:!0,optionConfig:{label:"itemName",value:"itemId"},fetchConfig:{apiName:"getBaseCodeSelect",otherParams:{itemId:"xuanDiFangShi"}},spanForm:12,formItemLayout:{labelCol:{xs:{span:20},sm:{span:8}},wrapperCol:{xs:{span:20},sm:{span:16}}}}},{isInTable:!1,form:{label:"\u5de5\u4f5c\u5185\u5bb9",field:"content",type:"textarea",placeholder:"\u8bf7\u8f93\u5165",required:!0}},{isInTable:!1,form:{label:"\u5bf9\u5e94\u6807\u6bb5\u4f30\u7b97/\u6982\u7b97",field:"amount1",type:"number",formatter:function(e){return e?"".concat(e.replace?e.replace(/(\u4e07|\u5143)/gi,""):e,"\u4e07\u5143"):e},parser:function(e){return e?e.replace(/(\u4e07|\u5143)/gi,""):e},placeholder:"\u8bf7\u8f93\u5165",required:!0,spanForm:12,formItemLayout:{labelCol:{xs:{span:20},sm:{span:8}},wrapperCol:{xs:{span:20},sm:{span:16}}}}},{isInTable:!1,form:{label:"\u8bbe\u8ba1\u8d39",field:"amount2",type:"number",suffix:"(\u4e07\u5143)",formatter:function(e){return e?"".concat(e.replace?e.replace(/(\u4e07|\u5143)/gi,""):e,"\u4e07\u5143"):e},parser:function(e){return e?e.replace(/(\u4e07|\u5143)/gi,""):e},placeholder:"\u8bf7\u8f93\u5165",spanForm:12,formItemLayout:{labelCol:{xs:{span:20},sm:{span:8}},wrapperCol:{xs:{span:20},sm:{span:16}}}}},{isInTable:!1,form:{label:"\u8bbe\u8ba1\u5355\u4f4d\u540d\u79f0",field:"designAdvistoryUnitStandardId",type:"select",showSearch:!0,required:!0,placeholder:"\u8bf7\u8f93\u5165",optionConfig:{label:"unitName",value:"designAdvistoryUnitStandardId",linkageFields:{orgCode:"orgCode",zjTzQualityList:"zjTzQualityList"}},fetchConfig:{apiName:"getZjTzDesignAdvistoryUnitStandardList"}}},{isInTable:!1,form:{label:"\u7ec4\u7ec7\u673a\u6784\u4ee3\u7801",field:"orgCode",disabled:!0,addDisabled:!0,editDisabled:!0,type:"string",placeholder:"\u8bf7\u8f93\u5165",required:!0}},{isInTable:!1,form:{label:"\u5355\u4f4d\u7c7b\u578b",field:"typeId",type:"select",placeholder:"\u8bf7\u9009\u62e9",required:!0,initialValue:"1",hide:!0,optionConfig:{label:"itemName",value:"itemId"},fetchConfig:{apiName:"getBaseCodeSelect",otherParams:{itemId:"danWeiLeiXing"}}}},{table:{title:"\u5de5\u7a0b\u53ef\u7814\u9636\u6bb5",noHaveSearchInput:!0,children:[{dataIndex:"total1Amount1",title:"\u9636\u6bb5\u603b\u6295\u8d44\uff08\u4e07\u5143\uff09",width:100,noHaveSearchInput:!0,key:"total1Amount1",type:"string"},{title:"\u9636\u6bb5\u8bbe\u8ba1\u8d39\uff08\u4e07\u5143\uff09",dataIndex:"total1Amount2",type:"number",width:100,noHaveSearchInput:!0,key:"total1Amount2"}]},isInForm:!1},{table:{title:"\u521d\u6b65\u8bbe\u8ba1\u9636\u6bb5",noHaveSearchInput:!0,children:[{dataIndex:"total2Amount1",title:"\u9636\u6bb5\u603b\u6295\u8d44\uff08\u4e07\u5143\uff09",width:100,noHaveSearchInput:!0,key:"total2Amount1",type:"string"},{title:"\u9636\u6bb5\u8bbe\u8ba1\u8d39\uff08\u4e07\u5143\uff09",dataIndex:"total2Amount2",type:"number",width:100,noHaveSearchInput:!0,key:"total2Amount2"}]},isInForm:!1},{table:{title:"\u65bd\u5de5\u56fe\u8bbe\u8ba1\u9636\u6bb5",noHaveSearchInput:!0,children:[{dataIndex:"total3Amount1",title:"\u9636\u6bb5\u603b\u6295\u8d44\uff08\u4e07\u5143\uff09",width:100,noHaveSearchInput:!0,key:"total3Amount1",type:"string"},{title:"\u9636\u6bb5\u8bbe\u8ba1\u8d39\uff08\u4e07\u5143\uff09",dataIndex:"total3Amount2",type:"number",width:100,noHaveSearchInput:!0,key:"total3Amount2"}]},isInForm:!1},{isInTable:!1,form:{type:"component",field:"diySK1",Component:function(e){return m.a.createElement("div",{style:{width:"100%",backgroundColor:"#eeeded",height:"32px",lineHeight:"32px",borderRadius:"2px",paddingLeft:"10px",marginBottom:"10px",marginTop:"10px"}},"\u8bbe\u8ba1\u5355\u4f4d\u8d44\u8d28")}}},{isInTable:!1,form:{type:"qnnTable",field:"zjTzQualityList",colStyle:{paddingLeft:12},incToForm:!0,qnnTableConfig:{actionBtnsPosition:"top",antd:{rowKey:"typeId",size:"small"},drawerConfig:{width:"1000px"},limit:999,curPage:1,paginationConfig:!1,firstRowIsSearch:!1,isShowRowSelect:!1,formItemLayout:{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},wrappedComponentRef:function(t){e.tables=t},formConfig:[{isInTable:!1,form:{label:"\u4e3b\u952eid",field:"typeId",hide:!0}},{table:{title:"\u4e13\u4e1a\u7c7b\u578b",dataIndex:"majorTypeId",key:"majorTypeId",tdEdit:!1,type:"select"},form:{type:"select",field:"majorTypeId",placeholder:"\u8bf7\u9009\u62e9",optionConfig:{label:"itemName",value:"itemId"},fetchConfig:{apiName:"getBaseCodeSelect",otherParams:{itemId:"zhuanYeLeiXing"}}}},{table:{title:"\u5bf9\u5e94\u8d44\u8d28",dataIndex:"correspondQualityId",key:"correspondQualityId",tdEdit:!1,type:"select"},form:{type:"select",field:"correspondQualityId",placeholder:"\u8bf7\u9009\u62e9",optionConfig:{label:"itemName",value:"itemId"},fetchConfig:{apiName:"getBaseCodeSelect",otherParams:{itemId:"duiYingZiZhi"}}}},{table:{title:"\u8d44\u8d28\u9644\u4ef6",dataIndex:"zjTzFileList",key:"zjTzFileList",tdEdit:!1,render:function(e,t){return e&&t.zjTzFileList.length>0?t.zjTzFileList[0].name:""},onClick:function(e){e.rowData&&e.rowData.zjTzFileList&&e.rowData.zjTzFileList[0]&&e.rowData.zjTzFileList[0].url&&window.open(e.rowData.zjTzFileList[0].url)}},form:{field:"zjTzFileList",type:"files",max:1,fetchConfig:{apiName:window.configs.domain+"upload"},showDownloadIcon:!0,onPreview:"bind:_docFilesByOfficeUrl",onChange:function(t,a){t&&t[0]&&t[0].name&&("rar"===t[0].name.split(".")[1]||"zip"===t[0].name.split(".")[1]||"7z"===t[0].name.split(".")[1])&&(o.b.warn("\u4e0d\u5141\u8bb8\u4e0a\u4f20rar\u3001zip\u30017z\u683c\u5f0f\u7684\u6587\u4ef6\uff01"),setTimeout(function(){e.table.qnnForm.form.setFieldsValue({zjTzFileList:[]})},200))}}}],actionBtns:[]}}},{isInTable:!1,form:{label:"\u8bbe\u8ba1\u5355\u4f4d\u9879\u76ee\u8d1f\u8d23\u4eba",field:"proLeader",type:"string",placeholder:"\u8bf7\u8f93\u5165",required:!0,spanForm:12,formItemLayout:{labelCol:{xs:{span:20},sm:{span:8}},wrapperCol:{xs:{span:20},sm:{span:16}}}}},{isInTable:!1,form:{label:"\u8bbe\u8ba1\u5355\u4f4d\u8d1f\u8d23\u4eba\u7535\u8bdd",field:"proLeaderTel",type:"phone",placeholder:"\u8bf7\u8f93\u5165",required:!0,spanForm:12,formItemLayout:{labelCol:{xs:{span:20},sm:{span:8}},wrapperCol:{xs:{span:20},sm:{span:16}}}}},{isInTable:!1,form:{type:"textarea",label:"\u5907\u6ce8",field:"remarks",placeholder:"\u8bf7\u8f93\u5165",required:!1}},{isInTable:!1,form:{field:"createTime",type:"date",label:"\u521b\u5efa\u65e5\u671f",addDisabled:!0,editDisabled:!0,placeholder:"\u8bf7\u8f93\u5165",spanForm:12,formItemLayout:{labelCol:{xs:{span:20},sm:{span:8}},wrapperCol:{xs:{span:20},sm:{span:16}}},initialValue:function(){return new Date}}},{isInTable:!1,form:{field:"createUserName",type:"string",label:"\u521b\u5efa\u7528\u6237",addDisabled:!0,editDisabled:!0,placeholder:"\u8bf7\u8f93\u5165",spanForm:12,formItemLayout:{labelCol:{xs:{span:20},sm:{span:8}},wrapperCol:{xs:{span:20},sm:{span:16}}},initialValue:a}},{isInTable:!1,form:{label:"\u9644\u4ef6",field:"zjTzFileList",type:"files",fetchConfig:{apiName:window.configs.domain+"upload",otherParams:{name:"\u8bbe\u8ba1\u5355\u4f4d\u7ba1\u7406"}},showDownloadIcon:!0,onPreview:"bind:_docFilesByOfficeUrl",onChange:function(t,a){t&&t[0]&&t[0].name&&("rar"===t[0].name.split(".")[1]||"zip"===t[0].name.split(".")[1]||"7z"===t[0].name.split(".")[1])&&(o.b.warn("\u4e0d\u5141\u8bb8\u4e0a\u4f20rar\u3001zip\u30017z\u683c\u5f0f\u7684\u6587\u4ef6\uff01"),setTimeout(function(){e.table.qnnForm.form.setFieldsValue({zjTzFileList:[]})},200))}}},{isInForm:!1,table:{title:"\u64cd\u4f5c",fixed:"right",dataIndex:"action",key:"action",align:"center",noHaveSearchInput:!0,showType:"tile",width:100,btns:[{name:"PolicyDetail",render:function(e){return"<a>\u8be6\u7ec6\u4fe1\u606f</a>"},onClick:function(e){var t=e.props.myPublic.appInfo.mainModule,a=e.rowData,n=a.designAdvistoryUnitId,o=(a.projectName,a.projectId),i=a.subprojectInfoId;e.props.dispatch(Object(f.push)("".concat(t,"unitMangeDetail/").concat(n,"/").concat(l,"/").concat(o,"/").concat(i)))}}]}}],method:{addClick:function(e){i?"all"===i?(e.btnCallbackFn.closeDrawer(),e.btnCallbackFn.msg.warning("\u8bf7\u9009\u62e9\u53f3\u4e0a\u89d2\u9879\u76ee\uff01")):e.btnCallbackFn.setActiveKey("0"):(e.btnCallbackFn.closeDrawer(),e.btnCallbackFn.msg.warning("\u8bf7\u9009\u62e9\u53f3\u4e0a\u89d2\u9879\u76ee\uff01"))}},actionBtns:{apiName:"getSysMenuBtn",otherParams:function(e){var t=e.Pprops;return{menuParentId:t.routerInfo.routeData[t.routerInfo.curKey]._value,tableField:"projectInfo"}}}})))}}]),t}(p.Component);t.default=g}}]);