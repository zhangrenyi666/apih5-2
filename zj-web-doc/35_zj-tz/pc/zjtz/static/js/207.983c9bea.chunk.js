(window.webpackJsonp=window.webpackJsonp||[]).push([[207],{"5gbV":function(e,t,a){"use strict";a.r(t);a("x/6R"),a("zIPO"),a("8Qi2"),a("MRnW"),a("IdsT"),a("l9AF"),a("S26F"),a("pBsb"),a("orcL"),a("3fBH");var i=a("g2mn"),n=a("UpC8"),l=(a("fx2i"),a("cZi0")),o=a("Id3l"),s=a("RNsw"),r=a("OR/T"),d=a("bn5B"),p=a("PnTt"),c=(a("w9C0"),a("XW+2")),m=a("r0ML"),f=a.n(m),u=a("6eYn"),b=a("x1WY"),g=a.n(b),h=a("vcLm"),I=a("U8v4"),y=c.a.confirm,w={antd:{rowKey:function(e){return e.designAdvistoryUnitRecordId},size:"small"},drawerConfig:{width:"1100px"},paginationConfig:{position:"bottom"},firstRowIsSearch:!1,isShowRowSelect:!0},C=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(r.a)(this,Object(d.a)(t).call(this,e))).handleCancelSend=function(){a.setState({visibleSend:!1,loadingSend:!1})},a.state={designAdvistoryUnitId:e.match.params.designAdvistoryUnitId||"",proNameVal:e.match.params.projectName||"",proNameId:e.match.params.projectId||"",subprojectInfoId:e.match.params.subprojectInfoId||"",visibleSend:!1,loadingSend:!1,designAdvistoryUnitRecordId:""},a}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this,t=this.state,a=t.designAdvistoryUnitId,o=t.proNameVal,s=t.proNameId,r=t.subprojectInfoId,d=t.visibleSend,p=t.loadingSend,m=t.designAdvistoryUnitRecordId;return f.a.createElement("div",{className:g.a.root},f.a.createElement(u.a,Object(n.a)({},this.props,{fetch:this.props.myFetch,upload:this.props.myUpload,headers:{token:this.props.loginAndLogoutInfo.loginInfo.token},fetchConfig:{apiName:"getZjTzDesignAdvistoryUnitRecordList",otherParams:{designAdvistoryUnitId:a,typeId:"2",projectId:s}},wrappedComponentRef:function(t){e.tableHGF=t},method:{goBack:function(e){var t=e.props.myPublic.appInfo.mainModule;e.props.dispatch(Object(I.push)("".concat(t,"ConsultingUnitManage")))},editClick:function(t){1===t.selectedRows.length?"0"===t.selectedRows[0].releaseId||"2"===t.selectedRows[0].releaseId?e.tableHGF.clearSelectedRows():(t.btnCallbackFn.closeDrawer(),l.b.warn("\u5df2\u4e0a\u62a5\u7684\u4e0d\u80fd\u4fee\u6539!"),e.tableHGF.clearSelectedRows()):l.b.warn("\u8bf7\u9009\u62e9\u4e00\u6761\u6570\u636e")},pingJia:function(t){1===t.selectedRows.length?"1"===t.selectedRows[0].releaseId?e.setState({visibleSend:!0,designAdvistoryUnitRecordId:t.selectedRows[0].designAdvistoryUnitRecordId}):l.b.warn("\u8bf7\u9009\u62e9\u5df2\u4e0a\u62a5\u6570\u636e\uff01"):l.b.warn("\u53ea\u80fd\u9009\u62e9\u4e00\u6761\u6570\u636e")},delClick:function(t){var a=t.props,i=a.myFetch,n=a.myPublic.appInfo.mainModule,o=[];if(t.selectedRows.length>0){for(var s=0;s<t.selectedRows.length;s++)"0"===t.selectedRows[s].releaseId||"2"===t.selectedRows[s].releaseId||o.push(t.selectedRows[s]);o.length>0?l.b.warn("\u672a\u4e0a\u62a5\u7684\u6570\u636e\u5141\u8bb8\u5220\u9664\uff01"):y({title:"\u786e\u5b9a\u5220\u9664\u4e48?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){i("batchDeleteUpdateZjTzDesignAdvistoryUnitRecord",t.selectedRows).then(function(a){var i=a.success,o=a.message;i?(l.b.success(o),t.state.data.length===t.selectedRows.length?t.props.dispatch(Object(I.push)("".concat(n,"ConsultingUnitManage"))):(e.tableHGF.refresh(),e.tableHGF.clearSelectedRows())):l.b.error(o)})}})}else l.b.warn("\u8bf7\u9009\u62e9\u6570\u636e!")},shangBao:function(t){var a=t.props.myFetch,i=[];if(t.selectedRows.length>0){for(var n=0;n<t.selectedRows.length;n++)"1"===t.selectedRows[n].releaseId&&i.push(t.selectedRows[n]);i.length>0?l.b.warn("\u5df2\u4e0a\u62a5\u7684\u6570\u636e\u4e0d\u5141\u8bb8\u4e0a\u62a5\uff01"):y({title:"\u786e\u5b9a\u4e0a\u62a5\u4e48?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){a("batchReleaseZjTzDesignAdvistoryUnitRecord",t.selectedRows).then(function(t){var a=t.success,i=t.message;a?(l.b.success(i),e.tableHGF.refresh(),e.tableHGF.clearSelectedRows()):l.b.error(i)})}})}else l.b.warn("\u8bf7\u9009\u62e9\u6570\u636e!")},tuiHui:function(t){var a=t.props.myFetch,i=[];if(t.selectedRows.length>0){for(var n=0;n<t.selectedRows.length;n++)"2"!==t.selectedRows[n].releaseId&&"0"!==t.selectedRows[n].releaseId||i.push(t.selectedRows[n]);i.length>0?l.b.warn("\u5df2\u4e0a\u62a5/\u88ab\u9000\u56de\u7684\u6570\u636e\u4e0d\u5141\u8bb8\u9000\u56de\uff01"):y({title:"\u786e\u5b9a\u9000\u56de\u4e48?",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){a("batchRecallZjTzDesignAdvistoryUnitRecord",t.selectedRows).then(function(t){var a=t.success,i=t.message;a?(l.b.success(i),e.tableHGF.refresh(),e.tableHGF.clearSelectedRows()):l.b.error(i)})}})}else l.b.warn("\u8bf7\u9009\u62e9\u6570\u636e!")}},actionBtns:{apiName:"getSysMenuBtn",otherParams:function(e){var t=e.Pprops;return{menuParentId:t.routerInfo.routeData[t.routerInfo.curKey]._value,tableField:"projectInfo"}}}},w,{formConfig:[{isInTable:!1,form:{field:"designAdvistoryUnitId",type:"string",initialValue:a,hide:!0}},{isInTable:!1,form:{field:"designAdvistoryUnitRecordId",type:"string",hide:!0}},{isInTable:!1,form:{field:"projectId",type:"string",hide:!0,initialValue:s}},{isInTable:!1,form:{label:"\u9879\u76ee\u540d\u79f0",field:"projectName",required:!0,addDisabled:!0,disabled:!0,editDisabled:!0,type:"string",placeholder:"\u8bf7\u8f93\u5165",initialValue:o}},{isInTable:!1,form:{type:"select",label:"\u5b50\u9879\u76ee\u540d\u79f0",showSearch:!0,field:"subprojectInfoId",placeholder:"\u8bf7\u8f93\u5165",addDisabled:!0,editDisabled:!0,initialValue:r,optionConfig:{label:"subprojectName",value:"subprojectInfoId"},fetchConfig:{apiName:"getZjTzProSubprojectInfoList",otherParams:{projectId:s}}}},{isInTable:!1,form:{label:"\u5355\u4f4d\u7c7b\u578b",field:"typeId",type:"select",placeholder:"\u8bf7\u9009\u62e9",required:!0,initialValue:"2",hide:!0,optionConfig:{label:"itemName",value:"itemId"},fetchConfig:{apiName:"getBaseCodeSelect",otherParams:{itemId:"danWeiLeiXing"}}}},{table:{title:"\u8bbe\u8ba1\u9636\u6bb5",filter:!0,onClick:"detail",dataIndex:"designStageName",key:"designStageName"},form:{label:"\u8bbe\u8ba1\u9636\u6bb5",field:"designStageId",type:"select",placeholder:"\u8bf7\u9009\u62e9",required:!0,editDisabled:!0,optionConfig:{label:"itemName",value:"itemId"},fetchConfig:{apiName:"getBaseCodeSelect",otherParams:{itemId:"sheJiJieDuan"}},spanForm:12,formItemLayout:{labelCol:{xs:{span:20},sm:{span:8}},wrapperCol:{xs:{span:20},sm:{span:16}}}}},{table:{title:"\u54a8\u8be2\u5355\u4f4d\u5168\u79f0",dataIndex:"unitName",key:"unitName"},isInForm:!1},{table:{title:"\u54a8\u8be2\u5355\u4f4d\u9009\u5b9a\u65b9\u5f0f",dataIndex:"selectModeName",key:"selectModeName"},form:{label:"\u9009\u5b9a\u65b9\u5f0f",field:"selectModeId",type:"select",placeholder:"\u8bf7\u9009\u62e9",required:!0,optionConfig:{label:"itemName",value:"itemId"},fetchConfig:{apiName:"getBaseCodeSelect",otherParams:{itemId:"xuanDiFangShi"}},spanForm:12,formItemLayout:{labelCol:{xs:{span:20},sm:{span:8}},wrapperCol:{xs:{span:20},sm:{span:16}}}}},{table:{title:"\u5bf9\u5e94\u8bbe\u8ba1\u5de5\u4f5c\u5185\u5bb9",width:300,tooltip:30,dataIndex:"content",key:"content"},form:{label:"\u5de5\u4f5c\u5185\u5bb9",field:"content",type:"textarea",placeholder:"\u8bf7\u8f93\u5165",required:!0}},{table:{title:"\u9884\u4f30\u6210\u6548(\u4e07\u5143)",dataIndex:"amount1",key:"amount1"},form:{label:"\u9884\u4f30\u6210\u6548",field:"amount1",type:"number",suffix:"(\u4e07\u5143)",formatter:function(e){return e?"".concat(e.replace?e.replace(/(\u4e07|\u5143)/gi,""):e,"\u4e07\u5143"):e},parser:function(e){return e?e.replace(/(\u4e07|\u5143)/gi,""):e},placeholder:"\u8bf7\u8f93\u5165",required:!0,spanForm:12,formItemLayout:{labelCol:{xs:{span:20},sm:{span:8}},wrapperCol:{xs:{span:20},sm:{span:16}}}}},{table:{title:"\u54a8\u8be2\u8d39(\u4e07\u5143)",dataIndex:"amount2",key:"amount2"},form:{label:"\u54a8\u8be2\u8d39",field:"amount2",type:"number",suffix:"(\u4e07\u5143)",formatter:function(e){return e?"".concat(e.replace?e.replace(/(\u4e07|\u5143)/gi,""):e,"\u4e07\u5143"):e},parser:function(e){return e?e.replace(/(\u4e07|\u5143)/gi,""):e},placeholder:"\u8bf7\u8f93\u5165",spanForm:12,formItemLayout:{labelCol:{xs:{span:20},sm:{span:8}},wrapperCol:{xs:{span:20},sm:{span:16}}}}},{isInTable:!1,form:{label:"\u54a8\u8be2\u5355\u4f4d\u540d\u79f0",field:"designAdvistoryUnitStandardId",type:"select",showSearch:!0,required:!0,placeholder:"\u8bf7\u8f93\u5165",optionConfig:{label:"unitName",value:"designAdvistoryUnitStandardId",linkageFields:{orgCode:"orgCode",zjTzQualityList:"zjTzQualityList"}},fetchConfig:{apiName:"getZjTzDesignAdvistoryUnitStandardList"},onChange:function(t,a){e.formIn&&e.formIn.refresh(),e.setState({InformData:a.itemdata.zjTzQualityList},function(){})}}},{isInTable:!1,form:{label:"\u7ec4\u7ec7\u673a\u6784\u4ee3\u7801",field:"orgCode",disabled:!0,addDisabled:!0,editDisabled:!0,type:"string",placeholder:"\u8bf7\u8f93\u5165",required:!0}},{isInTable:!1,form:{type:"component",field:"diySK1",Component:function(e){return f.a.createElement("div",{style:{width:"100%",backgroundColor:"#eeeded",height:"32px",lineHeight:"32px",borderRadius:"2px",paddingLeft:"10px",marginBottom:"10px",marginTop:"10px"}},"\u54a8\u8be2\u5355\u4f4d\u8d44\u8d28")}}},{isInTable:!1,form:{type:"qnnTable",field:"zjTzQualityList",colStyle:{paddingLeft:12},incToForm:!0,qnnTableConfig:{actionBtnsPosition:"top",antd:{rowKey:"typeId",size:"small"},drawerConfig:{width:"1000px"},limit:999,curPage:1,paginationConfig:!1,firstRowIsSearch:!1,isShowRowSelect:!1,formItemLayout:{labelCol:{xs:{span:24},sm:{span:4}},wrapperCol:{xs:{span:24},sm:{span:20}}},wrappedComponentRef:function(t){e.tables=t},formConfig:[{isInTable:!1,form:{label:"\u4e3b\u952eid",field:"typeId",hide:!0}},{table:{title:"\u4e13\u4e1a\u7c7b\u578b",dataIndex:"majorTypeId",key:"majorTypeId",tdEdit:!1,type:"select"},form:{type:"select",field:"majorTypeId",placeholder:"\u8bf7\u9009\u62e9",optionConfig:{label:"itemName",value:"itemId"},fetchConfig:{apiName:"getBaseCodeSelect",otherParams:{itemId:"zhuanYeLeiXing"}}}},{table:{title:"\u5bf9\u5e94\u8d44\u8d28",dataIndex:"correspondQualityId",key:"correspondQualityId",tdEdit:!1,type:"select"},form:{type:"select",field:"correspondQualityId",placeholder:"\u8bf7\u9009\u62e9",optionConfig:{label:"itemName",value:"itemId"},fetchConfig:{apiName:"getBaseCodeSelect",otherParams:{itemId:"duiYingZiZhi"}}}},{table:{title:"\u8d44\u8d28\u9644\u4ef6",dataIndex:"zjTzFileList",key:"zjTzFileList",tdEdit:!1,render:function(e,t){return e&&t.zjTzFileList.length>0?t.zjTzFileList[0].name:""},onClick:function(e){e.rowData&&e.rowData.zjTzFileList&&e.rowData.zjTzFileList[0]&&e.rowData.zjTzFileList[0].url&&window.open(e.rowData.zjTzFileList[0].url)}},form:{field:"zjTzFileList",type:"files",max:1,fetchConfig:{apiName:window.configs.domain+"upload",otherParams:{name:"\u54a8\u8be2\u5355\u4f4d\u7ba1\u7406"}},showDownloadIcon:!0,onPreview:"bind:_docFilesByOfficeUrl",onChange:function(t,a){t&&t[0]&&t[0].name&&("rar"===t[0].name.split(".")[1]||"zip"===t[0].name.split(".")[1]||"7z"===t[0].name.split(".")[1])&&(l.b.warn("\u4e0d\u5141\u8bb8\u4e0a\u4f20rar\u3001zip\u30017z\u683c\u5f0f\u7684\u6587\u4ef6\uff01"),setTimeout(function(){e.table.qnnForm.form.setFieldsValue({zjTzFileList:[]})},200))}}}],actionBtns:[]}}},{isInTable:!1,form:{label:"\u54a8\u8be2\u5355\u4f4d\u9879\u76ee\u8d1f\u8d23\u4eba",field:"proLeader",type:"string",placeholder:"\u8bf7\u8f93\u5165",required:!0,spanForm:12,formItemLayout:{labelCol:{xs:{span:20},sm:{span:8}},wrapperCol:{xs:{span:20},sm:{span:16}}}}},{isInTable:!1,form:{label:"\u54a8\u8be2\u5355\u4f4d\u8d1f\u8d23\u4eba\u7535\u8bdd",field:"proLeaderTel",type:"phone",placeholder:"\u8bf7\u8f93\u5165",required:!0,spanForm:12,formItemLayout:{labelCol:{xs:{span:20},sm:{span:8}},wrapperCol:{xs:{span:20},sm:{span:16}}}}},{table:{title:"\u72b6\u6001",filter:!0,dataIndex:"releaseId",key:"releaseId",type:"select"},isInForm:!1,form:{type:"select",field:"releaseId",optionConfig:{label:"label",value:"value"},optionData:[{label:"\u672a\u4e0a\u62a5",value:"0"},{label:"\u5df2\u4e0a\u62a5",value:"1"},{label:"\u88ab\u9000\u56de",value:"2"}]}},{table:{title:"\u8bc4\u4ef7\u7b49\u7ea7",dataIndex:"evaluateOrderName",key:"evaluateOrderName"},form:{label:"\u8bc4\u4ef7\u7b49\u7ea7",field:"evaluateOrderId",type:"select",addDisabled:!0,editDisabled:!0,placeholder:"\u8bf7\u8f93\u5165",optionConfig:{label:"itemName",value:"itemId"},fetchConfig:{apiName:"getBaseCodeSelect",otherParams:{itemId:"pingJiaDengJi"}}}},{isInTable:!1,form:{type:"textarea",label:"\u5907\u6ce8",field:"remarks",placeholder:"\u8bf7\u8f93\u5165",required:!1}},{isInTable:!1,form:{field:"createTime",type:"date",label:"\u521b\u5efa\u65e5\u671f",addDisabled:!0,editDisabled:!0,placeholder:"\u8bf7\u8f93\u5165",spanForm:12,formItemLayout:{labelCol:{xs:{span:20},sm:{span:8}},wrapperCol:{xs:{span:20},sm:{span:16}}},initialValue:function(){return new Date}}},{isInTable:!1,form:{field:"createUserName",type:"string",label:"\u521b\u5efa\u7528\u6237",addDisabled:!0,editDisabled:!0,placeholder:"\u8bf7\u8f93\u5165",spanForm:12,formItemLayout:{labelCol:{xs:{span:20},sm:{span:8}},wrapperCol:{xs:{span:20},sm:{span:16}}},initialValue:function(e){return e.loginAndLogoutInfo.loginInfo.userInfo.realName}}},{isInTable:!1,form:{label:"\u9644\u4ef6",field:"zjTzFileList",type:"files",fetchConfig:{apiName:window.configs.domain+"upload",otherParams:{name:"\u54a8\u8be2\u5355\u4f4d\u7ba1\u7406"}},showDownloadIcon:!0,onPreview:"bind:_docFilesByOfficeUrl",onChange:function(t,a){t&&t[0]&&t[0].name&&("rar"===t[0].name.split(".")[1]||"zip"===t[0].name.split(".")[1]||"7z"===t[0].name.split(".")[1])&&(l.b.warn("\u4e0d\u5141\u8bb8\u4e0a\u4f20rar\u3001zip\u30017z\u683c\u5f0f\u7684\u6587\u4ef6\uff01"),setTimeout(function(){e.table.qnnForm.form.setFieldsValue({zjTzFileList:[]})},200))}}}]})),f.a.createElement(c.a,{width:"500px",style:{top:"0"},title:"\u8bc4\u4ef7",visible:d,footer:null,onCancel:this.handleCancelSend,bodyStyle:{width:"500px"},centered:!0,destroyOnClose:this.handleCancelSend,wrapClassName:"modals"},f.a.createElement(i.a,{spinning:p},f.a.createElement(h.a,Object(n.a)({},this.props,{match:this.props.match,fetch:this.props.myFetch,upload:this.props.myUpload,headers:{token:this.props.loginAndLogoutInfo.loginInfo.token},formConfig:[{field:"designAdvistoryUnitId",type:"string",initialValue:a,hide:!0},{field:"designAdvistoryUnitRecordId",type:"string",initialValue:m,hide:!0},{label:"\u8bc4\u4ef7\u7b49\u7ea7",field:"evaluateOrderId",type:"select",addDisabled:!0,editDisabled:!0,placeholder:"\u8bf7\u8f93\u5165",optionConfig:{label:"itemName",value:"itemId"},fetchConfig:{apiName:"getBaseCodeSelect",otherParams:{itemId:"pingJiaDengJi"}}}],btns:[{name:"cancel",type:"dashed",label:"\u53d6\u6d88",isValidate:!1,onClick:function(){e.setState({visibleSend:!1,loadingSend:!1})}},{name:"submit",type:"primary",label:"\u4e0a\u62a5",onClick:function(t){e.setState({loadingSend:!0}),e.props.myFetch("evaluateZjTzDesignAdvistoryUnitRecord",t.values).then(function(t){var a=t.success,i=t.message;a?(l.b.success(i),e.tableHGF.refresh(),e.tableHGF.clearSelectedRows(),e.setState({visibleSend:!1,loadingSend:!1})):l.b.error(i)})}}],formItemLayout:{labelCol:{xs:{span:4},sm:{span:4}},wrapperCol:{xs:{span:20},sm:{span:20}}}})))))}}]),t}(m.Component);t.default=C}}]);